

<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
      helpers/ResourcesHelpers.js - Documentation
  </title>

  <link href="https://www.braintreepayments.com/images/favicon-ccda0b14.png" rel="icon" type="image/png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
  

  <!-- start Mixpanel -->
  <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("1919205b2da72e4da3b9b6639b444d59");</script>
  <!-- end Mixpanel -->
</head>

<body>
  <svg style="display: none;">
    <defs>
      <symbol id="linkIcon" fill="#706d77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
      </symbol>
    </defs>
  </svg>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <div class="top-nav-wrapper">
    <ul>
      <li >
        <a href="index.html">
          
            <svg fill="#6D6D6D" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
              <path d="M0 0h24v24H0z" fill="none"/>
            </svg>
          
          
        </a>
      </li>

      
      <li>
        <div class="search-wrapper">
          <svg fill="#6D6D6D" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
            <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
            <path d="M0 0h24v24H0z" fill="none"/>

          </svg>
          <input type="text" placeholder="Search" class="search-input">
        </div>
      </li>
      

    </ul>
  </div>

  <nav>
    <h3 class="reference-title">
      translationCore
    </h3>

    <h3>Classes</h3><ul><li id="AgreementCheckbox-nav"><a href="AgreementCheckbox.html">AgreementCheckbox</a></li><li id="Alert-nav"><a href="Alert.html">Alert</a></li><li id="AlertPortal-nav"><a href="AlertPortal.html">AlertPortal</a></li><li id="Alerts-nav"><a href="Alerts.html">Alerts</a><ul class='methods'><li data-type="method" id="Alerts-handleOnCancel-nav"><a href="Alerts.html#handleOnCancel">handleOnCancel</a></li><li data-type="method" id="Alerts-handleOnConfirm-nav"><a href="Alerts.html#handleOnConfirm">handleOnConfirm</a></li><li data-type="method" id="Alerts-handleOnIgnore-nav"><a href="Alerts.html#handleOnIgnore">handleOnIgnore</a></li></ul></li><li id="AppMenu-nav"><a href="AppMenu.html">AppMenu</a><ul class='methods'><li data-type="method" id="AppMenu-closeDialog-nav"><a href="AppMenu.html#closeDialog">closeDialog</a></li><li data-type="method" id="AppMenu-isDialogOpen-nav"><a href="AppMenu.html#isDialogOpen">isDialogOpen</a></li><li data-type="method" id="AppMenu-openDialog-nav"><a href="AppMenu.html#openDialog">openDialog</a></li></ul></li><li id="BaseDialog-nav"><a href="BaseDialog.html">BaseDialog</a></li><li id="CategoryPicker-nav"><a href="CategoryPicker.html">CategoryPicker</a></li><li id="ColoredIcon-nav"><a href="ColoredIcon.html">ColoredIcon</a></li><li id="ConfirmationDialog-nav"><a href="ConfirmationDialog.html">ConfirmationDialog</a></li><li id="ContentUpdateDialog-nav"><a href="ContentUpdateDialog.html">ContentUpdateDialog</a></li><li id="ContentUpdatesDialogContainer-nav"><a href="ContentUpdatesDialogContainer.html">ContentUpdatesDialogContainer</a></li><li id="DownloadDialog-nav"><a href="DownloadDialog.html">DownloadDialog</a></li><li id="DownloadManager-nav"><a href="DownloadManager.html">DownloadManager</a><ul class='methods'><li data-type="method" id="DownloadManager-addItem-nav"><a href="DownloadManager.html#~addItem">addItem</a></li><li data-type="method" id="DownloadManager-getItem-nav"><a href="DownloadManager.html#~getItem">getItem</a></li></ul></li><li id="DownloadUpdateDialogContainer-nav"><a href="DownloadUpdateDialogContainer.html">DownloadUpdateDialogContainer</a><ul class='methods'><li data-type="method" id="DownloadUpdateDialogContainer-_cancelDownload-nav"><a href="DownloadUpdateDialogContainer.html#_cancelDownload">_cancelDownload</a></li><li data-type="method" id="DownloadUpdateDialogContainer-_handleClose-nav"><a href="DownloadUpdateDialogContainer.html#_handleClose">_handleClose</a></li><li data-type="method" id="DownloadUpdateDialogContainer-_onDownloadError-nav"><a href="DownloadUpdateDialogContainer.html#_onDownloadError">_onDownloadError</a></li><li data-type="method" id="DownloadUpdateDialogContainer-_onDownloadProgress-nav"><a href="DownloadUpdateDialogContainer.html#_onDownloadProgress">_onDownloadProgress</a></li><li data-type="method" id="DownloadUpdateDialogContainer-_onDownloadStarted-nav"><a href="DownloadUpdateDialogContainer.html#_onDownloadStarted">_onDownloadStarted</a></li><li data-type="method" id="DownloadUpdateDialogContainer-_onDownloadSuccess-nav"><a href="DownloadUpdateDialogContainer.html#_onDownloadSuccess">_onDownloadSuccess</a></li></ul></li><li id="ErrorCount-nav"><a href="ErrorCount.html">ErrorCount</a></li><li id="ErrorDialog-nav"><a href="ErrorDialog.html">ErrorDialog</a></li><li id="FeedbackDialog-nav"><a href="FeedbackDialog.html">FeedbackDialog</a></li><li id="FeedbackDialogContainer-nav"><a href="FeedbackDialogContainer.html">FeedbackDialogContainer</a><ul class='methods'><li data-type="method" id="FeedbackDialogContainer-_submitFeedback-nav"><a href="FeedbackDialogContainer.html#_submitFeedback">_submitFeedback</a></li></ul></li><li id="HomeContainerContentWrapper-nav"><a href="HomeContainerContentWrapper.html">HomeContainerContentWrapper</a></li><li id="HomeScreenNavigation-nav"><a href="HomeScreenNavigation.html">HomeScreenNavigation</a></li><li id="HomeStep-nav"><a href="HomeStep.html">HomeStep</a></li><li id="HomeStepper-nav"><a href="HomeStepper.html">HomeStepper</a></li><li id="IgnorableAlert-nav"><a href="IgnorableAlert.html">IgnorableAlert</a></li><li id="InstanceStorage-nav"><a href="InstanceStorage.html">InstanceStorage</a><ul class='methods'><li data-type="method" id="InstanceStorage-key-nav"><a href="InstanceStorage.html#key">key</a></li></ul></li><li id="InstructionsCard-nav"><a href="InstructionsCard.html">InstructionsCard</a></li><li id="LanguageSelectField-nav"><a href="LanguageSelectField.html">LanguageSelectField</a></li><li id="LocaleSelectListContainer-nav"><a href="LocaleSelectListContainer.html">LocaleSelectListContainer</a></li><li id="LocaleSettingsDialogContainer-nav"><a href="LocaleSettingsDialogContainer.html">LocaleSettingsDialogContainer</a><ul class='methods'><li data-type="method" id="LocaleSettingsDialogContainer-_handleLanguageChange-nav"><a href="LocaleSettingsDialogContainer.html#_handleLanguageChange">_handleLanguageChange</a></li><li data-type="method" id="LocaleSettingsDialogContainer-_handleSave-nav"><a href="LocaleSettingsDialogContainer.html#_handleSave">_handleSave</a></li></ul></li><li id="LoginButtons-nav"><a href="LoginButtons.html">LoginButtons</a></li><li id="LoginDoor43Account-nav"><a href="LoginDoor43Account.html">LoginDoor43Account</a></li><li id="LoginTextFields-nav"><a href="LoginTextFields.html">LoginTextFields</a></li><li id="Menu-nav"><a href="Menu.html">Menu</a></li><li id="exports-nav"><a href="module.html#.exports">exports</a></li><li id="NavButton-nav"><a href="NavButton.html">NavButton</a></li><li id="PopoverMenu-nav"><a href="PopoverMenu.html">PopoverMenu</a><ul class='methods'><li data-type="method" id="PopoverMenu-_handleButtonOut-nav"><a href="PopoverMenu.html#_handleButtonOut">_handleButtonOut</a></li><li data-type="method" id="PopoverMenu-_handleButtonOver-nav"><a href="PopoverMenu.html#_handleButtonOver">_handleButtonOver</a></li><li data-type="method" id="PopoverMenu-_handleClick-nav"><a href="PopoverMenu.html#_handleClick">_handleClick</a></li><li data-type="method" id="PopoverMenu-_handleRequestClose-nav"><a href="PopoverMenu.html#_handleRequestClose">_handleRequestClose</a></li><li data-type="method" id="PopoverMenu-_hijackChildClick-nav"><a href="PopoverMenu.html#_hijackChildClick">_hijackChildClick</a></li></ul></li><li id="ProjectCardMenu-nav"><a href="ProjectCardMenu.html">ProjectCardMenu</a></li><li id="ProjectValidationContentWrapper-nav"><a href="ProjectValidationContentWrapper.html">ProjectValidationContentWrapper</a></li><li id="ResourceAPI-nav"><a href="ResourceAPI.html">ResourceAPI</a><ul class='methods'><li data-type="method" id="ResourceAPI-compareVersions-nav"><a href="ResourceAPI.html#.compareVersions">compareVersions</a></li><li data-type="method" id="ResourceAPI-default-nav"><a href="ResourceAPI.html#.default">default</a></li><li data-type="method" id="ResourceAPI-getLatestVersion-nav"><a href="ResourceAPI.html#.getLatestVersion">getLatestVersion</a></li><li data-type="method" id="ResourceAPI-getLatestVersionsAndOwners-nav"><a href="ResourceAPI.html#.getLatestVersionsAndOwners">getLatestVersionsAndOwners</a></li><li data-type="method" id="ResourceAPI-listVersions-nav"><a href="ResourceAPI.html#.listVersions">listVersions</a></li><li data-type="method" id="ResourceAPI-getLatestTranslationHelp-nav"><a href="ResourceAPI.html#getLatestTranslationHelp">getLatestTranslationHelp</a></li><li data-type="method" id="ResourceAPI-getTranslationHelps-nav"><a href="ResourceAPI.html#getTranslationHelps">getTranslationHelps</a></li></ul></li><li id="SoftwareUpdateContainer-nav"><a href="SoftwareUpdateContainer.html">SoftwareUpdateContainer</a></li><li id="SoftwareUpdateDialog-nav"><a href="SoftwareUpdateDialog.html">SoftwareUpdateDialog</a></li><li id="SoftwareUpdateDialogContainer-nav"><a href="SoftwareUpdateDialogContainer.html">SoftwareUpdateDialogContainer</a><ul class='methods'><li data-type="method" id="SoftwareUpdateDialogContainer-_fetchUrl-nav"><a href="SoftwareUpdateDialogContainer.html#_fetchUrl">_fetchUrl</a></li><li data-type="method" id="SoftwareUpdateDialogContainer-_handleClose-nav"><a href="SoftwareUpdateDialogContainer.html#_handleClose">_handleClose</a></li><li data-type="method" id="SoftwareUpdateDialogContainer-_handleSubmit-nav"><a href="SoftwareUpdateDialogContainer.html#_handleSubmit">_handleSubmit</a></li><li data-type="method" id="SoftwareUpdateDialogContainer-_startSoftwareCheck-nav"><a href="SoftwareUpdateDialogContainer.html#_startSoftwareCheck">_startSoftwareCheck</a></li><li data-type="method" id="SoftwareUpdateDialogContainer-_stopSoftwareCheck-nav"><a href="SoftwareUpdateDialogContainer.html#_stopSoftwareCheck">_stopSoftwareCheck</a></li><li data-type="method" id="SoftwareUpdateDialogContainer-applyRelease-nav"><a href="SoftwareUpdateDialogContainer.html#applyRelease">applyRelease</a></li></ul></li><li id="SuccessDialog-nav"><a href="SuccessDialog.html">SuccessDialog</a></li><li id="UsernameInput-nav"><a href="UsernameInput.html">UsernameInput</a></li></ul><h3>Modules</h3><ul><li id="Actions_AlertModal-nav"><a href="module-Actions_AlertModal.html">Actions/AlertModal</a><ul class='methods'><li data-type="method" id="Actions_AlertModal-closeAlertDialog-nav"><a href="module-Actions_AlertModal.html#.closeAlertDialog">closeAlertDialog</a></li><li data-type="method" id="Actions_AlertModal-openAlertDialog-nav"><a href="module-Actions_AlertModal.html#.openAlertDialog">openAlertDialog</a></li><li data-type="method" id="Actions_AlertModal-openOptionDialog-nav"><a href="module-Actions_AlertModal.html#.openOptionDialog">openOptionDialog</a></li></ul></li></ul><h3 id="global-nav">Global</h3><ul><li><a href="global.html#add">add</a></li><li><a href="global.html#addChapterFrontMatter">addChapterFrontMatter</a></li><li><a href="global.html#addFrontMatter">addFrontMatter</a></li><li><a href="global.html#addHeader">addHeader</a></li><li><a href="global.html#addLanguage">addLanguage</a></li><li><a href="global.html#addNewBible">addNewBible</a></li><li><a href="global.html#addObjectPropertyToManifest">addObjectPropertyToManifest</a></li><li><a href="global.html#addObjectPropertyToSettings">addObjectPropertyToSettings</a></li><li><a href="global.html#addOwner">addOwner</a></li><li><a href="global.html#addProjectValidationStep">addProjectValidationStep</a></li><li><a href="global.html#addRemote">addRemote</a></li><li><a href="global.html#addResource">addResource</a></li><li><a href="global.html#alerts">alerts</a></li><li><a href="global.html#archiveProject">archiveProject</a></li><li><a href="global.html#archiveSourceFiles">archiveSourceFiles</a></li><li><a href="global.html#areQuotesEqual">areQuotesEqual</a></li><li><a href="global.html#areResourcesNewer">areResourcesNewer</a></li><li><a href="global.html#areStringsEqualCaseInsensitive">areStringsEqualCaseInsensitive</a></li><li><a href="global.html#arrayToWordList">arrayToWordList</a></li><li><a href="global.html#assignLicenseToOnlineImportedProject">assignLicenseToOnlineImportedProject</a></li><li><a href="global.html#BIBLE_BOOKS">BIBLE_BOOKS</a></li><li><a href="global.html#bibleIdSort">bibleIdSort</a></li><li><a href="global.html#branch">branch</a></li><li><a href="global.html#branchLocal">branchLocal</a></li><li><a href="global.html#calculateProgress">calculateProgress</a></li><li><a href="global.html#cancelAndCloseProjectInformationCheck">cancelAndCloseProjectInformationCheck</a></li><li><a href="global.html#changeBranch">changeBranch</a></li><li><a href="global.html#changeGitToPointToNewRepo">changeGitToPointToNewRepo</a></li><li><a href="global.html#checkBookReference">checkBookReference</a></li><li><a href="global.html#checkCheckers">checkCheckers</a></li><li><a href="global.html#checkForNewLexicons">checkForNewLexicons</a></li><li><a href="global.html#checkForValidCategorySelections">checkForValidCategorySelections</a></li><li><a href="global.html#checkIfValidBetaProject">checkIfValidBetaProject</a></li><li><a href="global.html#checkIfWeNeedNewerOrigLangVersion">checkIfWeNeedNewerOrigLangVersion</a></li><li><a href="global.html#checkLanguageDetails">checkLanguageDetails</a></li><li><a href="global.html#checkout">checkout</a></li><li><a href="global.html#checkProjectDetails">checkProjectDetails</a></li><li><a href="global.html#checkProjectForAlignments">checkProjectForAlignments</a></li><li><a href="global.html#checkProjectForMergeConflicts">checkProjectForMergeConflicts</a></li><li><a href="global.html#checkTranslators">checkTranslators</a></li><li><a href="global.html#checkUSFMForMergeConflicts">checkUSFMForMergeConflicts</a></li><li><a href="global.html#cleanAlignmentMarkersFromString">cleanAlignmentMarkersFromString</a></li><li><a href="global.html#cleanupTmpPath">cleanupTmpPath</a></li><li><a href="global.html#clear">clear</a></li><li><a href="global.html#clearProjectInformationReducer">clearProjectInformationReducer</a></li><li><a href="global.html#clearRemote">clearRemote</a></li><li><a href="global.html#clone">clone</a></li><li><a href="global.html#closeAlert">closeAlert</a></li><li><a href="global.html#closeLoading">closeLoading</a></li><li><a href="global.html#closeProject">closeProject</a></li><li><a href="global.html#closeSoftwareUpdate">closeSoftwareUpdate</a></li><li><a href="global.html#combineData">combineData</a></li><li><a href="global.html#commit">commit</a></li><li><a href="global.html#confirmAction">confirmAction</a></li><li><a href="global.html#confirmationMiddleware">confirmationMiddleware</a></li><li><a href="global.html#confirmContinueOrCancelImportValidation">confirmContinueOrCancelImportValidation</a></li><li><a href="global.html#confirmOnlineAction">confirmOnlineAction</a></li><li><a href="global.html#connectToolApi">connectToolApi</a></li><li><a href="global.html#consolidateTwls">consolidateTwls</a></li><li><a href="global.html#content">content</a></li><li><a href="global.html#convert">convert</a></li><li><a href="global.html#convertAlignmentDataToUSFM">convertAlignmentDataToUSFM</a></li><li><a href="global.html#convertAlignmentFromVerseToVerseSpan">convertAlignmentFromVerseToVerseSpan</a></li><li><a href="global.html#convertAlignmentFromVerseToVerseSpanSub">convertAlignmentFromVerseToVerseSpanSub</a></li><li><a href="global.html#convertAlignmentsFromVerseSpansToVerse">convertAlignmentsFromVerseSpansToVerse</a></li><li><a href="global.html#convertAlignmentsFromVerseSpansToVerseSub">convertAlignmentsFromVerseSpansToVerseSub</a></li><li><a href="global.html#convertGitErrorMessage">convertGitErrorMessage</a></li><li><a href="global.html#convertPrintPreviewHtml">convertPrintPreviewHtml</a></li><li><a href="global.html#convertStrongstoStrong">convertStrongstoStrong</a></li><li><a href="global.html#convertToFullBookName">convertToFullBookName</a></li><li><a href="global.html#convertToProjectFormat">convertToProjectFormat</a></li><li><a href="global.html#convertVerseDataToUSFM">convertVerseDataToUSFM</a></li><li><a href="global.html#copyGroupDataToProject">copyGroupDataToProject</a></li><li><a href="global.html#copyMissingSubfolders">copyMissingSubfolders</a></li><li><a href="global.html#copySourceContentUpdaterManifest">copySourceContentUpdaterManifest</a></li><li><a href="global.html#correctOccurrencesInAlignmentWords">correctOccurrencesInAlignmentWords</a></li><li><a href="global.html#createCheckArray">createCheckArray</a></li><li><a href="global.html#createLanguagesObjectFromResources">createLanguagesObjectFromResources</a></li><li><a href="global.html#createNewBranch">createNewBranch</a></li><li><a href="global.html#createNewRepo">createNewRepo</a></li><li><a href="global.html#createPreviewWindow">createPreviewWindow</a></li><li><a href="global.html#createRepo">createRepo</a></li><li><a href="global.html#createUSFMFromTsProject">createUSFMFromTsProject</a></li><li><a href="global.html#dataPath">dataPath</a></li><li><a href="global.html#dataPathExists">dataPathExists</a></li><li><a href="global.html#dataPathExistsSync">dataPathExistsSync</a></li><li><a href="global.html#dateFromTimestamp">dateFromTimestamp</a></li><li><a href="global.html#deleteDataFile">deleteDataFile</a></li><li><a href="global.html#deleteDataFileSync">deleteDataFileSync</a></li><li><a href="global.html#deleteImportProjectForLink">deleteImportProjectForLink</a></li><li><a href="global.html#deleteImportsFolder">deleteImportsFolder</a></li><li><a href="global.html#deletePreReleaseResources">deletePreReleaseResources</a></li><li><a href="global.html#deleteProjectFromImportsFolder">deleteProjectFromImportsFolder</a></li><li><a href="global.html#detail">detail</a></li><li><a href="global.html#detectInvalidProjectStructure">detectInvalidProjectStructure</a></li><li><a href="global.html#dimScreen">dimScreen</a></li><li><a href="global.html#displayLoadingUSFMAlert">displayLoadingUSFMAlert</a></li><li><a href="global.html#displayOverwriteButton">displayOverwriteButton</a></li><li><a href="global.html#displayTools">displayTools</a></li><li><a href="global.html#displayUSFMExportFinishedDialog">displayUSFMExportFinishedDialog</a></li><li><a href="global.html#doDcsRenamePrompting">doDcsRenamePrompting</a></li><li><a href="global.html#doesBranchExist">doesBranchExist</a></li><li><a href="global.html#doesDcsProjectNameAlreadyExist">doesDcsProjectNameAlreadyExist</a></li><li><a href="global.html#doesProjectAlreadyExist">doesProjectAlreadyExist</a></li><li><a href="global.html#doesProjectNameMatchSpec">doesProjectNameMatchSpec</a></li><li><a href="global.html#doesRemoteRepoExist">doesRemoteRepoExist</a></li><li><a href="global.html#doLocalProjectRenamePrompting">doLocalProjectRenamePrompting</a></li><li><a href="global.html#doPrint">doPrint</a></li><li><a href="global.html#doRenamePrompting">doRenamePrompting</a></li><li><a href="global.html#doValidationAndPrompting">doValidationAndPrompting</a></li><li><a href="global.html#download">download</a></li><li><a href="global.html#downloadAndLoadViewUrl">downloadAndLoadViewUrl</a></li><li><a href="global.html#downloadAndLoadViewUrlWithFallback">downloadAndLoadViewUrlWithFallback</a></li><li><a href="global.html#downloadFromUrl">downloadFromUrl</a></li><li><a href="global.html#downloadMissingResource">downloadMissingResource</a></li><li><a href="global.html#downloadProject">downloadProject</a></li><li><a href="global.html#downloadSourceContentUpdates">downloadSourceContentUpdates</a></li><li><a href="global.html#enhanceTranslation">enhanceTranslation</a></li><li><a href="global.html#ensureFileContentsJson">ensureFileContentsJson</a></li><li><a href="global.html#executeArchive">executeArchive</a></li><li><a href="global.html#explodeLocaleName">explodeLocaleName</a></li><li><a href="global.html#exportToCSV">exportToCSV</a></li><li><a href="global.html#exportToCSVZip">exportToCSVZip</a></li><li><a href="global.html#exportToUSFM">exportToUSFM</a></li><li><a href="global.html#extractAllResources">extractAllResources</a></li><li><a href="global.html#extractVersesFromChunk">extractVersesFromChunk</a></li><li><a href="global.html#extractZippedResourceContent">extractZippedResourceContent</a></li><li><a href="global.html#fillDefaultTools">fillDefaultTools</a></li><li><a href="global.html#filterAndSort">filterAndSort</a></li><li><a href="global.html#finalize">finalize</a></li><li><a href="global.html#findAlert">findAlert</a></li><li><a href="global.html#findArticleFilePath">findArticleFilePath</a></li><li><a href="global.html#findGroupDataItem">findGroupDataItem</a></li><li><a href="global.html#findMissingVerses">findMissingVerses</a></li><li><a href="global.html#findRepo">findRepo</a></li><li><a href="global.html#findResourceIdAndNickname">findResourceIdAndNickname</a></li><li><a href="global.html#findUsfmTagInHeader">findUsfmTagInHeader</a></li><li><a href="global.html#findWordsInWordList">findWordsInWordList</a></li><li><a href="global.html#fix_tWords">fix_tWords</a></li><li><a href="global.html#fixBibleDataFolderName">fixBibleDataFolderName</a></li><li><a href="global.html#fixManifestVerThree">fixManifestVerThree</a></li><li><a href="global.html#fixOccurrencesInVerse">fixOccurrencesInVerse</a></li><li><a href="global.html#fixProjectAlignmentTopWords">fixProjectAlignmentTopWords</a></li><li><a href="global.html#fixProjectOccurrencesTopWords">fixProjectOccurrencesTopWords</a></li><li><a href="global.html#flattenContextId">flattenContextId</a></li><li><a href="global.html#flattenNotesCategories">flattenNotesCategories</a></li><li><a href="global.html#generateChapterGroupData">generateChapterGroupData</a></li><li><a href="global.html#generateChapterGroupIndex">generateChapterGroupIndex</a></li><li><a href="global.html#generateCSVFile">generateCSVFile</a></li><li><a href="global.html#generateCSVString">generateCSVString</a></li><li><a href="global.html#generateImportPath">generateImportPath</a></li><li><a href="global.html#generateLoadPath">generateLoadPath</a></li><li><a href="global.html#generateManifest">generateManifest</a></li><li><a href="global.html#generateManifestForUsfm">generateManifestForUsfm</a></li><li><a href="global.html#generateManifestForUsfmProject">generateManifestForUsfmProject</a></li><li><a href="global.html#generateNewProjectName">generateNewProjectName</a></li><li><a href="global.html#generatePathToDataItems">generatePathToDataItems</a></li><li><a href="global.html#generateSavePath">generateSavePath</a></li><li><a href="global.html#generateTargetBibleFromTstudioProjectPath">generateTargetBibleFromTstudioProjectPath</a></li><li><a href="global.html#generateTargetBibleFromUSFMPath">generateTargetBibleFromUSFMPath</a></li><li><a href="global.html#generateTargetLanguageBibleFromUsfm">generateTargetLanguageBibleFromUsfm</a></li><li><a href="global.html#generateTimestamp">generateTimestamp</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#getActiveHomeScreenSteps">getActiveHomeScreenSteps</a></li><li><a href="global.html#getActiveLanguage">getActiveLanguage</a></li><li><a href="global.html#getActiveLocaleLanguage">getActiveLocaleLanguage</a></li><li><a href="global.html#getActiveSteps">getActiveSteps</a></li><li><a href="global.html#getAlertIsOpen">getAlertIsOpen</a></li><li><a href="global.html#getAlerts">getAlerts</a></li><li><a href="global.html#getAlignedGLText">getAlignedGLText</a></li><li><a href="global.html#getAlignedTextFromBible">getAlignedTextFromBible</a></li><li><a href="global.html#getAlignedWordListForVerse">getAlignedWordListForVerse</a></li><li><a href="global.html#getAlignmentDataFromPath">getAlignmentDataFromPath</a></li><li><a href="global.html#getAlignmentDataPath">getAlignmentDataPath</a></li><li><a href="global.html#getAlignmentPathsFromProject">getAlignmentPathsFromProject</a></li><li><a href="global.html#getAllCategoryMapping">getAllCategoryMapping</a></li><li><a href="global.html#getAllLanguageIdsFromResourceFolder">getAllLanguageIdsFromResourceFolder</a></li><li><a href="global.html#getAllResourceManifests">getAllResourceManifests</a></li><li><a href="global.html#getAllResourceVersions">getAllResourceVersions</a></li><li><a href="global.html#getAnchorTags">getAnchorTags</a></li><li><a href="global.html#getApplicationVersion">getApplicationVersion</a></li><li><a href="global.html#getArchBits">getArchBits</a></li><li><a href="global.html#getAvailableCategories">getAvailableCategories</a></li><li><a href="global.html#getAvailableScripturePaneSelections">getAvailableScripturePaneSelections</a></li><li><a href="global.html#getBaseName">getBaseName</a></li><li><a href="global.html#getBestMatchForVerse">getBestMatchForVerse</a></li><li><a href="global.html#getBibleIndex">getBibleIndex</a></li><li><a href="global.html#getBibleManifest">getBibleManifest</a></li><li><a href="global.html#getBibles">getBibles</a></li><li><a href="global.html#getBookDataDir">getBookDataDir</a></li><li><a href="global.html#getBookId">getBookId</a></li><li><a href="global.html#getBookName">getBookName</a></li><li><a href="global.html#getBookTranslation">getBookTranslation</a></li><li><a href="global.html#getBookTranslationShort">getBookTranslationShort</a></li><li><a href="global.html#getCategoriesDir">getCategoriesDir</a></li><li><a href="global.html#getCategoriesPath">getCategoriesPath</a></li><li><a href="global.html#getCategoryGroupIds">getCategoryGroupIds</a></li><li><a href="global.html#getChapterFromVerseText">getChapterFromVerseText</a></li><li><a href="global.html#getCheckStateForCategory">getCheckStateForCategory</a></li><li><a href="global.html#getContextHash">getContextHash</a></li><li><a href="global.html#getContextIdPathFromIndex">getContextIdPathFromIndex</a></li><li><a href="global.html#getCurrentBranch">getCurrentBranch</a></li><li><a href="global.html#getCurrentLog">getCurrentLog</a></li><li><a href="global.html#getCurrentManifestVersion">getCurrentManifestVersion</a></li><li><a href="global.html#getCurrentOrigLanguageVersionOwner">getCurrentOrigLanguageVersionOwner</a></li><li><a href="global.html#getCurrentOrigLangVersionForTn">getCurrentOrigLangVersionForTn</a></li><li><a href="global.html#getCurrentPaneSetting">getCurrentPaneSetting</a></li><li><a href="global.html#getCurrentTargetLanguageVerseFromAlignments">getCurrentTargetLanguageVerseFromAlignments</a></li><li><a href="global.html#getCurrentToolName">getCurrentToolName</a></li><li><a href="global.html#getDefaultBranch">getDefaultBranch</a></li><li><a href="global.html#getDefaultPath">getDefaultPath</a></li><li><a href="global.html#getDefaultTools">getDefaultTools</a></li><li><a href="global.html#getDetailsFromProjectName">getDetailsFromProjectName</a></li><li><a href="global.html#getDownloadErrorList">getDownloadErrorList</a></li><li><a href="global.html#getDuplicateProjectWarning">getDuplicateProjectWarning</a></li><li><a href="global.html#getEmail">getEmail</a></li><li><a href="global.html#getEmptyAlignmentData">getEmptyAlignmentData</a></li><li><a href="global.html#getErrorDetails">getErrorDetails</a></li><li><a href="global.html#getErrorFeedbackCategory">getErrorFeedbackCategory</a></li><li><a href="global.html#getErrorFeedbackExtraDetails">getErrorFeedbackExtraDetails</a></li><li><a href="global.html#getErrorFeedbackMessage">getErrorFeedbackMessage</a></li><li><a href="global.html#getErrorMessage">getErrorMessage</a></li><li><a href="global.html#getExpectedBookVerses">getExpectedBookVerses</a></li><li><a href="global.html#getExportType">getExportType</a></li><li><a href="global.html#getFeedbackCloseCallback">getFeedbackCloseCallback</a></li><li><a href="global.html#getFeedbackDetailsForHelpDesk">getFeedbackDetailsForHelpDesk</a></li><li><a href="global.html#getFilePath">getFilePath</a></li><li><a href="global.html#getFilesInResourcePath">getFilesInResourcePath</a></li><li><a href="global.html#getFilteredSubFolders">getFilteredSubFolders</a></li><li><a href="global.html#getFoldersInResourceFolder">getFoldersInResourceFolder</a></li><li><a href="global.html#getFontList">getFontList</a></li><li><a href="global.html#getGatewayLanguageCodeAndQuote">getGatewayLanguageCodeAndQuote</a></li><li><a href="global.html#getGatewayLanguageList">getGatewayLanguageList</a></li><li><a href="global.html#getGLQuoteFromAlignedBible">getGLQuoteFromAlignedBible</a></li><li><a href="global.html#getGlRequirementsForTool">getGlRequirementsForTool</a></li><li><a href="global.html#getGroupData">getGroupData</a></li><li><a href="global.html#getGroupDataForVerse">getGroupDataForVerse</a></li><li><a href="global.html#getGroupName">getGroupName</a></li><li><a href="global.html#getGroupsData">getGroupsData</a></li><li><a href="global.html#getHeaderTag">getHeaderTag</a></li><li><a href="global.html#getHeaderTags">getHeaderTags</a></li><li><a href="global.html#getHomeScreenStep">getHomeScreenStep</a></li><li><a href="global.html#getInitialBibleDataFolderName">getInitialBibleDataFolderName</a></li><li><a href="global.html#getInvalidCountForTool">getInvalidCountForTool</a></li><li><a href="global.html#getIsHomeVisible">getIsHomeVisible</a></li><li><a href="global.html#getIsLoggedIn">getIsLoggedIn</a></li><li><a href="global.html#getIsNextStepDisabled">getIsNextStepDisabled</a></li><li><a href="global.html#getIsOverwritePermitted">getIsOverwritePermitted</a></li><li><a href="global.html#getIsProjectAlreadyImported">getIsProjectAlreadyImported</a></li><li><a href="global.html#getIsSoftwareUpdateOpen">getIsSoftwareUpdateOpen</a></li><li><a href="global.html#getIsUserLoggedIn">getIsUserLoggedIn</a></li><li><a href="global.html#getIsUsfmProject">getIsUsfmProject</a></li><li><a href="global.html#getJsonFilesInPath">getJsonFilesInPath</a></li><li><a href="global.html#getLabelWithHover">getLabelWithHover</a></li><li><a href="global.html#getLanguageByCode">getLanguageByCode</a></li><li><a href="global.html#getLanguageByCodeSelection">getLanguageByCodeSelection</a></li><li><a href="global.html#getLanguageByName">getLanguageByName</a></li><li><a href="global.html#getLanguageByNameSelection">getLanguageByNameSelection</a></li><li><a href="global.html#getLanguageCodes">getLanguageCodes</a></li><li><a href="global.html#getLanguageId">getLanguageId</a></li><li><a href="global.html#getLanguages">getLanguages</a></li><li><a href="global.html#getLanguagesSortedByCode">getLanguagesSortedByCode</a></li><li><a href="global.html#getLanguagesSortedByName">getLanguagesSortedByName</a></li><li><a href="global.html#getLanguageTranslation">getLanguageTranslation</a></li><li><a href="global.html#getLatestBibleVersionManifest">getLatestBibleVersionManifest</a></li><li><a href="global.html#getLatestForChecks">getLatestForChecks</a></li><li><a href="global.html#getLatestOriginalLanguageResource">getLatestOriginalLanguageResource</a></li><li><a href="global.html#getLatestResourcesForTn">getLatestResourcesForTn</a></li><li><a href="global.html#getLatestVersion">getLatestVersion</a></li><li><a href="global.html#getLatestVersionPath">getLatestVersionPath</a></li><li><a href="global.html#getLexiconData">getLexiconData</a></li><li><a href="global.html#getListOfOutdatedSourceContent">getListOfOutdatedSourceContent</a></li><li><a href="global.html#getListOfSourceContentToUpdate">getListOfSourceContentToUpdate</a></li><li><a href="global.html#getLoadedCategories">getLoadedCategories</a></li><li><a href="global.html#getLocaleLanguages">getLocaleLanguages</a></li><li><a href="global.html#getLocaleLoaded">getLocaleLoaded</a></li><li><a href="global.html#getLocalizedErrorMessage">getLocalizedErrorMessage</a></li><li><a href="global.html#getLocalizedErrorPrompt">getLocalizedErrorPrompt</a></li><li><a href="global.html#getLocalUser">getLocalUser</a></li><li><a href="global.html#getLogFilePathForCurrentDate">getLogFilePathForCurrentDate</a></li><li><a href="global.html#getManifest">getManifest</a></li><li><a href="global.html#getManifestPath">getManifestPath</a></li><li><a href="global.html#getMergeConflicts">getMergeConflicts</a></li><li><a href="global.html#getMissingResources">getMissingResources</a></li><li><a href="global.html#getMissingVerses">getMissingVerses</a></li><li><a href="global.html#getMostRecentVersionInFolder">getMostRecentVersionInFolder</a></li><li><a href="global.html#getMyProjects">getMyProjects</a></li><li><a href="global.html#getName">getName</a></li><li><a href="global.html#getNames">getNames</a></li><li><a href="global.html#getNestedKey">getNestedKey</a></li><li><a href="global.html#getNextHomeScreenStepDisabled">getNextHomeScreenStepDisabled</a></li><li><a href="global.html#getNextProjectValidationStepDisabled">getNextProjectValidationStepDisabled</a></li><li><a href="global.html#getNickname">getNickname</a></li><li><a href="global.html#getOccurrences">getOccurrences</a></li><li><a href="global.html#getOccurrencesForWord">getOccurrencesForWord</a></li><li><a href="global.html#getOccurrencesForWordList">getOccurrencesForWordList</a></li><li><a href="global.html#getOlBookPath">getOlBookPath</a></li><li><a href="global.html#getOriginalChapter">getOriginalChapter</a></li><li><a href="global.html#getOriginalChapterFromManifest">getOriginalChapterFromManifest</a></li><li><a href="global.html#getOriginalChapterFromResources">getOriginalChapterFromResources</a></li><li><a href="global.html#getOriginalLangOwner">getOriginalLangOwner</a></li><li><a href="global.html#getOriginalLanguageChapterResources">getOriginalLanguageChapterResources</a></li><li><a href="global.html#getOriginalLanguageId">getOriginalLanguageId</a></li><li><a href="global.html#getOriginalLanguageListForVerseData">getOriginalLanguageListForVerseData</a></li><li><a href="global.html#getOriginalVerse">getOriginalVerse</a></li><li><a href="global.html#getOriginalVerseFromResources">getOriginalVerseFromResources</a></li><li><a href="global.html#getOrigLangforBook">getOrigLangforBook</a></li><li><a href="global.html#getOrigLangVersionInfoForTn">getOrigLangVersionInfoForTn</a></li><li><a href="global.html#getOrigLangWordListForVerse">getOrigLangWordListForVerse</a></li><li><a href="global.html#getParentCategory">getParentCategory</a></li><li><a href="global.html#getParsedUSFM">getParsedUSFM</a></li><li><a href="global.html#getProjectAlignments">getProjectAlignments</a></li><li><a href="global.html#getProjectBookId">getProjectBookId</a></li><li><a href="global.html#getProjectDirectories">getProjectDirectories</a></li><li><a href="global.html#getProjectHeaderData">getProjectHeaderData</a></li><li><a href="global.html#getProjectId">getProjectId</a></li><li><a href="global.html#getProjectInfo">getProjectInfo</a></li><li><a href="global.html#getProjectLabel">getProjectLabel</a></li><li><a href="global.html#getProjectManifest">getProjectManifest</a></li><li><a href="global.html#getProjectName">getProjectName</a></li><li><a href="global.html#getProjectNickname">getProjectNickname</a></li><li><a href="global.html#getProjectProgressForTools">getProjectProgressForTools</a></li><li><a href="global.html#getProjects">getProjects</a></li><li><a href="global.html#getProjectSaveLocation">getProjectSaveLocation</a></li><li><a href="global.html#getProjectsByType">getProjectsByType</a></li><li><a href="global.html#getProjectSettings">getProjectSettings</a></li><li><a href="global.html#getProjectsFromFolder">getProjectsFromFolder</a></li><li><a href="global.html#getProjectToolProgress">getProjectToolProgress</a></li><li><a href="global.html#getProjectValidationStep">getProjectValidationStep</a></li><li><a href="global.html#getQuoteAsArray">getQuoteAsArray</a></li><li><a href="global.html#getRawAlignmentsForVerseSpan">getRawAlignmentsForVerseSpan</a></li><li><a href="global.html#getReadOrderForTstudioFIles">getReadOrderForTstudioFIles</a></li><li><a href="global.html#getReferenceCount">getReferenceCount</a></li><li><a href="global.html#getRegularLabel">getRegularLabel</a></li><li><a href="global.html#getRemote">getRemote</a></li><li><a href="global.html#getRemoteRepoHead">getRemoteRepoHead</a></li><li><a href="global.html#getRepoNameInfo">getRepoNameInfo</a></li><li><a href="global.html#getRepoOwnerUrl">getRepoOwnerUrl</a></li><li><a href="global.html#getResourceDownloadsAlertMessage">getResourceDownloadsAlertMessage</a></li><li><a href="global.html#getResourceId">getResourceId</a></li><li><a href="global.html#getResourceIdWarning">getResourceIdWarning</a></li><li><a href="global.html#getResourcesNeededByTool">getResourcesNeededByTool</a></li><li><a href="global.html#getSafeErrorMessage">getSafeErrorMessage</a></li><li><a href="global.html#getSavedRemote">getSavedRemote</a></li><li><a href="global.html#getSaveLocation">getSaveLocation</a></li><li><a href="global.html#getSelectedCategories">getSelectedCategories</a></li><li><a href="global.html#getSelectedTool">getSelectedTool</a></li><li><a href="global.html#getSelectedToolApi">getSelectedToolApi</a></li><li><a href="global.html#getSelectedToolContainer">getSelectedToolContainer</a></li><li><a href="global.html#getSelectedToolTitle">getSelectedToolTitle</a></li><li><a href="global.html#getSetting">getSetting</a></li><li><a href="global.html#getSettings">getSettings</a></li><li><a href="global.html#getShowOverwriteWarning">getShowOverwriteWarning</a></li><li><a href="global.html#getShowProjectInformationScreen">getShowProjectInformationScreen</a></li><li><a href="global.html#getSourceBook">getSourceBook</a></li><li><a href="global.html#getSourceBookManifest">getSourceBookManifest</a></li><li><a href="global.html#getSourceContentUpdateCount">getSourceContentUpdateCount</a></li><li><a href="global.html#getStep">getStep</a></li><li><a href="global.html#getSupportedGatewayLanguageResourcesList">getSupportedGatewayLanguageResourcesList</a></li><li><a href="global.html#getSupportingToolApis">getSupportingToolApis</a></li><li><a href="global.html#getTargetBook">getTargetBook</a></li><li><a href="global.html#getTargetChapter">getTargetChapter</a></li><li><a href="global.html#getTargetLanguageNameFromUsfm">getTargetLanguageNameFromUsfm</a></li><li><a href="global.html#getTargetLanguageVerse">getTargetLanguageVerse</a></li><li><a href="global.html#getTargetVerse">getTargetVerse</a></li><li><a href="global.html#getToggledGroupData">getToggledGroupData</a></li><li><a href="global.html#getTool">getTool</a></li><li><a href="global.html#getToolCardLaunchStatus">getToolCardLaunchStatus</a></li><li><a href="global.html#getToolCategories">getToolCategories</a></li><li><a href="global.html#getToolFolderNames">getToolFolderNames</a></li><li><a href="global.html#getToolGatewayLanguage">getToolGatewayLanguage</a></li><li><a href="global.html#getToolGlOwner">getToolGlOwner</a></li><li><a href="global.html#getToolGroupIndex">getToolGroupIndex</a></li><li><a href="global.html#getToolNames">getToolNames</a></li><li><a href="global.html#getToolProgress">getToolProgress</a></li><li><a href="global.html#getTools">getTools</a></li><li><a href="global.html#getToolsByKey">getToolsByKey</a></li><li><a href="global.html#getToolViewsAndAPIInitialState">getToolViewsAndAPIInitialState</a></li><li><a href="global.html#getTranslate">getTranslate</a></li><li><a href="global.html#getTranslation">getTranslation</a></li><li><a href="global.html#getTsvOLVersion">getTsvOLVersion</a></li><li><a href="global.html#getUniqueBookIds">getUniqueBookIds</a></li><li><a href="global.html#getUpdateAsset">getUpdateAsset</a></li><li><a href="global.html#getUserDoor43Url">getUserDoor43Url</a></li><li><a href="global.html#getUserEmail">getUserEmail</a></li><li><a href="global.html#getUsername">getUsername</a></li><li><a href="global.html#getUserTokenDoor43Url">getUserTokenDoor43Url</a></li><li><a href="global.html#getUsfm2ExportFile">getUsfm2ExportFile</a></li><li><a href="global.html#getUsfm3ExportFile">getUsfm3ExportFile</a></li><li><a href="global.html#getUSFMDetails">getUSFMDetails</a></li><li><a href="global.html#getUsfmExportName">getUsfmExportName</a></li><li><a href="global.html#getUsfmForVerseContent">getUsfmForVerseContent</a></li><li><a href="global.html#getUSfmFromProjectPath">getUSfmFromProjectPath</a></li><li><a href="global.html#getUsfmHeaderInfo">getUsfmHeaderInfo</a></li><li><a href="global.html#getValidGatewayBibles">getValidGatewayBibles</a></li><li><a href="global.html#getValidGatewayBiblesForTool">getValidGatewayBiblesForTool</a></li><li><a href="global.html#getValidResourcePath">getValidResourcePath</a></li><li><a href="global.html#getVerseAlignments">getVerseAlignments</a></li><li><a href="global.html#getVersesForSpan">getVersesForSpan</a></li><li><a href="global.html#getVersionFromManifest">getVersionFromManifest</a></li><li><a href="global.html#getVersionsInPath">getVersionsInPath</a></li><li><a href="global.html#getWordCountInVerse">getWordCountInVerse</a></li><li><a href="global.html#getWordText">getWordText</a></li><li><a href="global.html#gitErrorToLocalizedPrompt">gitErrorToLocalizedPrompt</a></li><li><a href="global.html#gitVersion">gitVersion</a></li><li><a href="global.html#GlDropDownList">GlDropDownList</a></li><li><a href="global.html#goToStep">goToStep</a></li><li><a href="global.html#groupCategory">groupCategory</a></li><li><a href="global.html#groupCategoryTranslated">groupCategoryTranslated</a></li><li><a href="global.html#groupIsVisible">groupIsVisible</a></li><li><a href="global.html#groupItemIsVisible">groupItemIsVisible</a></li><li><a href="global.html#groupName">groupName</a></li><li><a href="global.html#handleDcsOperation">handleDcsOperation</a></li><li><a href="global.html#handleDcsRenameCollision">handleDcsRenameCollision</a></li><li><a href="global.html#handleDcsRenameCollisionPromise">handleDcsRenameCollisionPromise</a></li><li><a href="global.html#handleOverwriteWarning">handleOverwriteWarning</a></li><li><a href="global.html#hasAlignments">hasAlignments</a></li><li><a href="global.html#hasChangedFilesForCheck">hasChangedFilesForCheck</a></li><li><a href="global.html#hasGitHistoryForCurrentUser">hasGitHistoryForCurrentUser</a></li><li><a href="global.html#hasNewGroupsData">hasNewGroupsData</a></li><li><a href="global.html#hasOriginalLanguageChanged">hasOriginalLanguageChanged</a></li><li><a href="global.html#hasOriginalLanguageChangedSub">hasOriginalLanguageChangedSub</a></li><li><a href="global.html#hasValidHelps">hasValidHelps</a></li><li><a href="global.html#hasValidOL">hasValidOL</a></li><li><a href="global.html#heading">heading</a></li><li><a href="global.html#ignoreAlert">ignoreAlert</a></li><li><a href="global.html#importCategoryGroupData">importCategoryGroupData</a></li><li><a href="global.html#increment">increment</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#initEnv">initEnv</a></li><li><a href="global.html#initializeProjectInformationCheckContinueButton">initializeProjectInformationCheckContinueButton</a></li><li><a href="global.html#initializeReducersForProjectImportValidation">initializeReducersForProjectImportValidation</a></li><li><a href="global.html#initializeReducersForProjectOpenValidation">initializeReducersForProjectOpenValidation</a></li><li><a href="global.html#initializeReducersForProjectValidation">initializeReducersForProjectValidation</a></li><li><a href="global.html#initiateProjectValidationStepper">initiateProjectValidationStepper</a></li><li><a href="global.html#initLowLevel_">initLowLevel_</a></li><li><a href="global.html#initSub_">initSub_</a></li><li><a href="global.html#injectFileLogging">injectFileLogging</a></li><li><a href="global.html#insertProjectInformationCheckToStepper">insertProjectInformationCheckToStepper</a></li><li><a href="global.html#insertStr">insertStr</a></li><li><a href="global.html#INSTANCE_STORAGE">INSTANCE_STORAGE</a></li><li><a href="global.html#invalidateAlignment">invalidateAlignment</a></li><li><a href="global.html#isAttributeChanged">isAttributeChanged</a></li><li><a href="global.html#isCategoryLoaded">isCategoryLoaded</a></li><li><a href="global.html#isCheckUnique">isCheckUnique</a></li><li><a href="global.html#isDirectory">isDirectory</a></li><li><a href="global.html#isDirty">isDirty</a></li><li><a href="global.html#isGitInstalled">isGitInstalled</a></li><li><a href="global.html#isInvalidationAlertDisplaying">isInvalidationAlertDisplaying</a></li><li><a href="global.html#isLanguageCodeValid">isLanguageCodeValid</a></li><li><a href="global.html#isLiteInstall">isLiteInstall</a></li><li><a href="global.html#isMatched">isMatched</a></li><li><a href="global.html#isMatchingCheckInstance">isMatchingCheckInstance</a></li><li><a href="global.html#isNewTestament">isNewTestament</a></li><li><a href="global.html#isNotRegistered">isNotRegistered</a></li><li><a href="global.html#isOldTestament">isOldTestament</a></li><li><a href="global.html#isOriginalLanguage">isOriginalLanguage</a></li><li><a href="global.html#isOriginalLanguageBible">isOriginalLanguageBible</a></li><li><a href="global.html#isOverwritePermitted">isOverwritePermitted</a></li><li><a href="global.html#isProjectMissingVerses">isProjectMissingVerses</a></li><li><a href="global.html#isProjectSupported">isProjectSupported</a></li><li><a href="global.html#isRepo">isRepo</a></li><li><a href="global.html#isResourceIdValid">isResourceIdValid</a></li><li><a href="global.html#isSameVerse">isSameVerse</a></li><li><a href="global.html#isToolSupported">isToolSupported</a></li><li><a href="global.html#isToolUsingCurrentOriginalLanguage">isToolUsingCurrentOriginalLanguage</a></li><li><a href="global.html#isUSFMProject">isUSFMProject</a></li><li><a href="global.html#isValidBibleBook">isValidBibleBook</a></li><li><a href="global.html#isValidResource">isValidResource</a></li><li><a href="global.html#isValidVerseSpan">isValidVerseSpan</a></li><li><a href="global.html#isVerseAligned">isVerseAligned</a></li><li><a href="global.html#isVerseSpan">isVerseSpan</a></li><li><a href="global.html#key">key</a></li><li><a href="global.html#languagesObjectToResourcesArray">languagesObjectToResourcesArray</a></li><li><a href="global.html#length">length</a></li><li><a href="global.html#loadArticleData">loadArticleData</a></li><li><a href="global.html#loadArticleDataAsync">loadArticleDataAsync</a></li><li><a href="global.html#loadBibleBook">loadBibleBook</a></li><li><a href="global.html#loadBiblesByLanguageId">loadBiblesByLanguageId</a></li><li><a href="global.html#loadBookResource">loadBookResource</a></li><li><a href="global.html#loadBookTranslations">loadBookTranslations</a></li><li><a href="global.html#loadChapterResource">loadChapterResource</a></li><li><a href="global.html#loadCheckData">loadCheckData</a></li><li><a href="global.html#loadCurrentCheckCategories">loadCurrentCheckCategories</a></li><li><a href="global.html#loadFile">loadFile</a></li><li><a href="global.html#loadFileAsync">loadFileAsync</a></li><li><a href="global.html#loadGroupsData">loadGroupsData</a></li><li><a href="global.html#loadInvalidCount">loadInvalidCount</a></li><li><a href="global.html#loadLexiconEntry">loadLexiconEntry</a></li><li><a href="global.html#loadLocalization">loadLocalization</a></li><li><a href="global.html#loadOlderOriginalLanguageResource">loadOlderOriginalLanguageResource</a></li><li><a href="global.html#loadProjectDataByType">loadProjectDataByType</a></li><li><a href="global.html#loadProjectDetails">loadProjectDetails</a></li><li><a href="global.html#loadProjectGroupData">loadProjectGroupData</a></li><li><a href="global.html#loadProjectGroupIndex">loadProjectGroupIndex</a></li><li><a href="global.html#loadProjectLicenseMarkdownFile">loadProjectLicenseMarkdownFile</a></li><li><a href="global.html#loadResourceArticle">loadResourceArticle</a></li><li><a href="global.html#loadSourceBookTranslations">loadSourceBookTranslations</a></li><li><a href="global.html#loadState">loadState</a></li><li><a href="global.html#loadTargetLanguageBook">loadTargetLanguageBook</a></li><li><a href="global.html#loadTool">loadTool</a></li><li><a href="global.html#loadToolGroupIndex">loadToolGroupIndex</a></li><li><a href="global.html#loadTools">loadTools</a></li><li><a href="global.html#loadToolsInDir">loadToolsInDir</a></li><li><a href="global.html#loadUSFMFile">loadUSFMFile</a></li><li><a href="global.html#loadUSFMFileAsync">loadUSFMFileAsync</a></li><li><a href="global.html#loadViewUrl">loadViewUrl</a></li><li><a href="global.html#LOCAL_STORAGE">LOCAL_STORAGE</a></li><li><a href="global.html#localImport">localImport</a></li><li><a href="global.html#login">login</a></li><li><a href="global.html#makeDialogActions">makeDialogActions</a></li><li><a href="global.html#makeSureBiblesLoadedForTool">makeSureBiblesLoadedForTool</a></li><li><a href="global.html#makeSureCurrentBranchHasName">makeSureCurrentBranchHasName</a></li><li><a href="global.html#makeSureEnvInit">makeSureEnvInit</a></li><li><a href="global.html#makeSureProjectUnlocked">makeSureProjectUnlocked</a></li><li><a href="global.html#makeSureResourcesLoaded">makeSureResourcesLoaded</a></li><li><a href="global.html#makeSureUsfm3InHeader">makeSureUsfm3InHeader</a></li><li><a href="global.html#makeToolProps">makeToolProps</a></li><li><a href="global.html#manifestExists">manifestExists</a></li><li><a href="global.html#merge">merge</a></li><li><a href="global.html#mergeOldProjectToNewProject">mergeOldProjectToNewProject</a></li><li><a href="global.html#mergeVerseData">mergeVerseData</a></li><li><a href="global.html#migrateChapterToVerseObjects">migrateChapterToVerseObjects</a></li><li><a href="global.html#migrateCurrentPaneSettings1">migrateCurrentPaneSettings1</a></li><li><a href="global.html#migrateCurrentPaneSettings2">migrateCurrentPaneSettings2</a></li><li><a href="global.html#migrateCurrentPaneSettings3">migrateCurrentPaneSettings3</a></li><li><a href="global.html#migrateCurrentPaneSettings4">migrateCurrentPaneSettings4</a></li><li><a href="global.html#migrateOldCheckingResourceData">migrateOldCheckingResourceData</a></li><li><a href="global.html#migrateProject">migrateProject</a></li><li><a href="global.html#migrateResourcesFolder">migrateResourcesFolder</a></li><li><a href="global.html#migrateSaveChangesInOldProjects">migrateSaveChangesInOldProjects</a></li><li><a href="global.html#migrateToAddTargetLanguageBookName">migrateToAddTargetLanguageBookName</a></li><li><a href="global.html#migrateToLanguageAwareCurrentPaneSettings">migrateToLanguageAwareCurrentPaneSettings</a></li><li><a href="global.html#migrateToolsSettings">migrateToolsSettings</a></li><li><a href="global.html#migrateToVersion6">migrateToVersion6</a></li><li><a href="global.html#migrateToVersion7">migrateToVersion7</a></li><li><a href="global.html#migrateToVersion8">migrateToVersion8</a></li><li><a href="global.html#mirror">mirror</a></li><li><a href="global.html#move">move</a></li><li><a href="global.html#moveProject">moveProject</a></li><li><a href="global.html#moveResourcesFromOldGrcFolder">moveResourcesFromOldGrcFolder</a></li><li><a href="global.html#normalize">normalize</a></li><li><a href="global.html#normalizeList">normalizeList</a></li><li><a href="global.html#onlineImport">onlineImport</a></li><li><a href="global.html#onMissingTranslation">onMissingTranslation</a></li><li><a href="global.html#open">open</a></li><li><a href="global.html#openAlert">openAlert</a></li><li><a href="global.html#openIgnorableAlert">openIgnorableAlert</a></li><li><a href="global.html#openOnlyProjectDetailsScreen">openOnlyProjectDetailsScreen</a></li><li><a href="global.html#openProject">openProject</a></li><li><a href="global.html#openSafe">openSafe</a></li><li><a href="global.html#openSoftwareUpdate">openSoftwareUpdate</a></li><li><a href="global.html#openTool">openTool</a></li><li><a href="global.html#organizedInvalidatedCheckFiles">organizedInvalidatedCheckFiles</a></li><li><a href="global.html#pad">pad</a></li><li><a href="global.html#parseArticleAbstract">parseArticleAbstract</a></li><li><a href="global.html#parseMergeConflictVersion">parseMergeConflictVersion</a></li><li><a href="global.html#parseMilestone">parseMilestone</a></li><li><a href="global.html#parseRemoteUrl">parseRemoteUrl</a></li><li><a href="global.html#parseRepoUrl">parseRepoUrl</a></li><li><a href="global.html#parseUsfmDetails">parseUsfmDetails</a></li><li><a href="global.html#path">path</a></li><li><a href="global.html#pathExistsSync">pathExistsSync</a></li><li><a href="global.html#prepareProjectRepo">prepareProjectRepo</a></li><li><a href="global.html#prepareToolForLoading">prepareToolForLoading</a></li><li><a href="global.html#preserveNeededOrigLangVersions">preserveNeededOrigLangVersions</a></li><li><a href="global.html#printWindowContents">printWindowContents</a></li><li><a href="global.html#processChapter">processChapter</a></li><li><a href="global.html#projectExistsInProjectsFolder">projectExistsInProjectsFolder</a></li><li><a href="global.html#projectHasMergeConflicts">projectHasMergeConflicts</a></li><li><a href="global.html#projectHasMultipleBooks">projectHasMultipleBooks</a></li><li><a href="global.html#promptForInvalidCheckFeedback">promptForInvalidCheckFeedback</a></li><li><a href="global.html#promptMissingDetails">promptMissingDetails</a></li><li><a href="global.html#promptUserAboutMissingResource">promptUserAboutMissingResource</a></li><li><a href="global.html#pull">pull</a></li><li><a href="global.html#push">push</a></li><li><a href="global.html#pushNewRepo">pushNewRepo</a></li><li><a href="global.html#pushProjectRepo">pushProjectRepo</a></li><li><a href="global.html#read">read</a></li><li><a href="global.html#readCurrentContextIdSync">readCurrentContextIdSync</a></li><li><a href="global.html#readDataDir">readDataDir</a></li><li><a href="global.html#readDataDirSync">readDataDirSync</a></li><li><a href="global.html#readDataFile">readDataFile</a></li><li><a href="global.html#readDataFileSync">readDataFileSync</a></li><li><a href="global.html#readFile">readFile</a></li><li><a href="global.html#readFileSync">readFileSync</a></li><li><a href="global.html#readJsonFile">readJsonFile</a></li><li><a href="global.html#readLatestChecks">readLatestChecks</a></li><li><a href="global.html#readSubDirs">readSubDirs</a></li><li><a href="global.html#readSubDirsOfArray">readSubDirsOfArray</a></li><li><a href="global.html#recoverFailedOnlineImport">recoverFailedOnlineImport</a></li><li><a href="global.html#registerTool">registerTool</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#removeBibleFromList">removeBibleFromList</a></li><li><a href="global.html#removeExtraWordsFromAlignments">removeExtraWordsFromAlignments</a></li><li><a href="global.html#removeOldThelps">removeOldThelps</a></li><li><a href="global.html#removeOutDatedResources">removeOutDatedResources</a></li><li><a href="global.html#removeProjectValidationStep">removeProjectValidationStep</a></li><li><a href="global.html#removeRemote">removeRemote</a></li><li><a href="global.html#removeStaleCategoriesFromCurrent">removeStaleCategoriesFromCurrent</a></li><li><a href="global.html#renameBranch">renameBranch</a></li><li><a href="global.html#renameProject">renameProject</a></li><li><a href="global.html#renameRepo">renameRepo</a></li><li><a href="global.html#renameRepoLocally">renameRepoLocally</a></li><li><a href="global.html#replaceEllipsisInObjectArray">replaceEllipsisInObjectArray</a></li><li><a href="global.html#replaceEllipsisInObjectStr">replaceEllipsisInObjectStr</a></li><li><a href="global.html#replaceFontSizes">replaceFontSizes</a></li><li><a href="global.html#replacePageSizes">replacePageSizes</a></li><li><a href="global.html#replacePixelSizes">replacePixelSizes</a></li><li><a href="global.html#replaceWordsAndMilestones">replaceWordsAndMilestones</a></li><li><a href="global.html#resetAlignmentsForVerse">resetAlignmentsForVerse</a></li><li><a href="global.html#resetCategoryGroupIds">resetCategoryGroupIds</a></li><li><a href="global.html#resetLoadedCategories">resetLoadedCategories</a></li><li><a href="global.html#resetSourceContentUpdatesReducer">resetSourceContentUpdatesReducer</a></li><li><a href="global.html#revParse">revParse</a></li><li><a href="global.html#run">run</a></li><li><a href="global.html#sanitizeRemoteUrl">sanitizeRemoteUrl</a></li><li><a href="global.html#save">save</a></li><li><a href="global.html#saveAllCSVData">saveAllCSVData</a></li><li><a href="global.html#saveAndCloseProjectInformationCheckIfValid">saveAndCloseProjectInformationCheckIfValid</a></li><li><a href="global.html#saveChangesInOldProjects">saveChangesInOldProjects</a></li><li><a href="global.html#saveCheckingDetailsToProjectInformationReducer">saveCheckingDetailsToProjectInformationReducer</a></li><li><a href="global.html#saveCommentsToCSV">saveCommentsToCSV</a></li><li><a href="global.html#saveContextId">saveContextId</a></li><li><a href="global.html#saveData">saveData</a></li><li><a href="global.html#saveDebounced">saveDebounced</a></li><li><a href="global.html#saveGroupsToCSV">saveGroupsToCSV</a></li><li><a href="global.html#saveHeaders">saveHeaders</a></li><li><a href="global.html#saveProjectHeaderData">saveProjectHeaderData</a></li><li><a href="global.html#saveProjectLicense">saveProjectLicense</a></li><li><a href="global.html#saveProjectManifest">saveProjectManifest</a></li><li><a href="global.html#saveProjectSettings">saveProjectSettings</a></li><li><a href="global.html#saveRemindersToCSV">saveRemindersToCSV</a></li><li><a href="global.html#saveRemote">saveRemote</a></li><li><a href="global.html#saveResourcesUsed">saveResourcesUsed</a></li><li><a href="global.html#saveSelectionsToCSV">saveSelectionsToCSV</a></li><li><a href="global.html#saveState">saveState</a></li><li><a href="global.html#saveTargetBible">saveTargetBible</a></li><li><a href="global.html#saveTargetLanguage">saveTargetLanguage</a></li><li><a href="global.html#saveToolDataToCSV">saveToolDataToCSV</a></li><li><a href="global.html#saveUsfmVerse">saveUsfmVerse</a></li><li><a href="global.html#saveVerseEditsToCSV">saveVerseEditsToCSV</a></li><li><a href="global.html#scaleVariablesInTemplate">scaleVariablesInTemplate</a></li><li><a href="global.html#seeIfBookHasAlignments">seeIfBookHasAlignments</a></li><li><a href="global.html#selectLanguage">selectLanguage</a></li><li><a href="global.html#selectLocalProject">selectLocalProject</a></li><li><a href="global.html#selectProjectLicense">selectProjectLicense</a></li><li><a href="global.html#sendUpdateResourceErrorFeedback">sendUpdateResourceErrorFeedback</a></li><li><a href="global.html#SESSION_STORAGE">SESSION_STORAGE</a></li><li><a href="global.html#set">set</a></li><li><a href="global.html#setActiveLanguageSafely">setActiveLanguageSafely</a></li><li><a href="global.html#setAllLanguageInfoInProjectInformationReducer">setAllLanguageInfoInProjectInformationReducer</a></li><li><a href="global.html#setAlreadyImportedInProjectInformationCheckReducer">setAlreadyImportedInProjectInformationCheckReducer</a></li><li><a href="global.html#setBookIDInProjectInformationReducer">setBookIDInProjectInformationReducer</a></li><li><a href="global.html#setCategoryGroupIds">setCategoryGroupIds</a></li><li><a href="global.html#setCategoryLoaded">setCategoryLoaded</a></li><li><a href="global.html#setCheckersInProjectInformationReducer">setCheckersInProjectInformationReducer</a></li><li><a href="global.html#setContributorsInProjectInformationReducer">setContributorsInProjectInformationReducer</a></li><li><a href="global.html#setCurrentCategories">setCurrentCategories</a></li><li><a href="global.html#setDefaultProjectCategories">setDefaultProjectCategories</a></li><li><a href="global.html#setDotEnv">setDotEnv</a></li><li><a href="global.html#setErrorFeedbackCategory">setErrorFeedbackCategory</a></li><li><a href="global.html#setErrorFeedbackDetails">setErrorFeedbackDetails</a></li><li><a href="global.html#setErrorFeedbackMessage">setErrorFeedbackMessage</a></li><li><a href="global.html#setFeedbackCloseCallback">setFeedbackCloseCallback</a></li><li><a href="global.html#setLanguage">setLanguage</a></li><li><a href="global.html#setLanguageDirectionInProjectInformationReducer">setLanguageDirectionInProjectInformationReducer</a></li><li><a href="global.html#setLanguageIdInProjectInformationReducer">setLanguageIdInProjectInformationReducer</a></li><li><a href="global.html#setLanguageNameInProjectInformationReducer">setLanguageNameInProjectInformationReducer</a></li><li><a href="global.html#setLocaleLoaded">setLocaleLoaded</a></li><li><a href="global.html#setLocalImportInProjectInformationCheckReducer">setLocalImportInProjectInformationCheckReducer</a></li><li><a href="global.html#setNicknameInProjectInformationReducer">setNicknameInProjectInformationReducer</a></li><li><a href="global.html#setOverwritePermittedInProjectInformationCheckReducer">setOverwritePermittedInProjectInformationCheckReducer</a></li><li><a href="global.html#setProjectDetailsInProjectInformationReducer">setProjectDetailsInProjectInformationReducer</a></li><li><a href="global.html#setProjectFontInProjectInformationReducer">setProjectFontInProjectInformationReducer</a></li><li><a href="global.html#setProjectManifest">setProjectManifest</a></li><li><a href="global.html#setProjectSettings">setProjectSettings</a></li><li><a href="global.html#setProjectToolGL">setProjectToolGL</a></li><li><a href="global.html#setResourceIDInProjectInformationReducer">setResourceIDInProjectInformationReducer</a></li><li><a href="global.html#setSaveLocation">setSaveLocation</a></li><li><a href="global.html#setSelectedCategories">setSelectedCategories</a></li><li><a href="global.html#setSetting">setSetting</a></li><li><a href="global.html#setSkipProjectNameCheckInProjectInformationCheckReducer">setSkipProjectNameCheckInProjectInformationCheckReducer</a></li><li><a href="global.html#setSystemLocale">setSystemLocale</a></li><li><a href="global.html#SETTINGS_PATH">SETTINGS_PATH</a></li><li><a href="global.html#setToolSettings">setToolSettings</a></li><li><a href="global.html#setUpDefaultUSFMManifest">setUpDefaultUSFMManifest</a></li><li><a href="global.html#setUpManifest">setUpManifest</a></li><li><a href="global.html#setUpProjectDetails">setUpProjectDetails</a></li><li><a href="global.html#setUpSettings">setUpSettings</a></li><li><a href="global.html#setUpUSFMJSONObject">setUpUSFMJSONObject</a></li><li><a href="global.html#setUsfmProjectInProjectInformationCheckReducer">setUsfmProjectInProjectInformationCheckReducer</a></li><li><a href="global.html#setValuesForProjectValidation">setValuesForProjectValidation</a></li><li><a href="global.html#setVerseObjectsInAlignmentJSON">setVerseObjectsInAlignmentJSON</a></li><li><a href="global.html#setVersionInManifest">setVersionInManifest</a></li><li><a href="global.html#shouldProjectNameBeUpdated">shouldProjectNameBeUpdated</a></li><li><a href="global.html#shouldRun">shouldRun</a></li><li><a href="global.html#showAlert">showAlert</a></li><li><a href="global.html#showDcsRenameFailure">showDcsRenameFailure</a></li><li><a href="global.html#showDcsRenameFailurePromise">showDcsRenameFailurePromise</a></li><li><a href="global.html#showDialog">showDialog</a></li><li><a href="global.html#showElectronGitDialog">showElectronGitDialog</a></li><li><a href="global.html#showElectronGitSetup">showElectronGitSetup</a></li><li><a href="global.html#showErrorFeedbackDialog">showErrorFeedbackDialog</a></li><li><a href="global.html#showIgnorableAlert">showIgnorableAlert</a></li><li><a href="global.html#showIgnorableDialog">showIgnorableDialog</a></li><li><a href="global.html#showInvalidatedWarnings">showInvalidatedWarnings</a></li><li><a href="global.html#showInvalidOrigLangVersionError">showInvalidOrigLangVersionError</a></li><li><a href="global.html#showInvalidVersionError">showInvalidVersionError</a></li><li><a href="global.html#showLoading">showLoading</a></li><li><a href="global.html#showPreview">showPreview</a></li><li><a href="global.html#showRenamedDialog">showRenamedDialog</a></li><li><a href="global.html#sortByNamesCaseInsensitive">sortByNamesCaseInsensitive</a></li><li><a href="global.html#sortFilesByTstudioReadOrder">sortFilesByTstudioReadOrder</a></li><li><a href="global.html#sortMetadatas">sortMetadatas</a></li><li><a href="global.html#sortVersions">sortVersions</a></li><li><a href="global.html#status">status</a></li><li><a href="global.html#stepperActionCount">stepperActionCount</a></li><li><a href="global.html#storageAvailable">storageAvailable</a></li><li><a href="global.html#storeUSFMSaveLocation">storeUSFMSaveLocation</a></li><li><a href="global.html#stringifyArgs">stringifyArgs</a></li><li><a href="global.html#stringifyKey">stringifyKey</a></li><li><a href="global.html#stringifySafe">stringifySafe</a></li><li><a href="global.html#submitFeedback">submitFeedback</a></li><li><a href="global.html#targetBibleExists">targetBibleExists</a></li><li><a href="global.html#testForCheckingData">testForCheckingData</a></li><li><a href="global.html#testResourceByType">testResourceByType</a></li><li><a href="global.html#throwIfRemoteRepoExists">throwIfRemoteRepoExists</a></li><li><a href="global.html#timeFromTimestamp">timeFromTimestamp</a></li><li><a href="global.html#toggleHomeView">toggleHomeView</a></li><li><a href="global.html#toggleNextButton">toggleNextButton</a></li><li><a href="global.html#toggleProjectInformationCheckSaveButton">toggleProjectInformationCheckSaveButton</a></li><li><a href="global.html#toggleSetting">toggleSetting</a></li><li><a href="global.html#tools">tools</a></li><li><a href="global.html#toolsReducer">toolsReducer</a></li><li><a href="global.html#trimNewLine">trimNewLine</a></li><li><a href="global.html#TruncateAcronym">TruncateAcronym</a></li><li><a href="global.html#type">type</a></li><li><a href="global.html#update">update</a></li><li><a href="global.html#updateAlignedWordAttribFromOriginalForBook">updateAlignedWordAttribFromOriginalForBook</a></li><li><a href="global.html#updateAlignedWordAttribFromOriginalForChapter">updateAlignedWordAttribFromOriginalForChapter</a></li><li><a href="global.html#updateAlignedWordsFromOriginalForVerse">updateAlignedWordsFromOriginalForVerse</a></li><li><a href="global.html#updateAlignedWordsFromOriginalWordList">updateAlignedWordsFromOriginalWordList</a></li><li><a href="global.html#updateAlignedWordsFromOrigLanguage">updateAlignedWordsFromOrigLanguage</a></li><li><a href="global.html#updateAlignments">updateAlignments</a></li><li><a href="global.html#updateAlignmentsForFile">updateAlignmentsForFile</a></li><li><a href="global.html#updateArray">updateArray</a></li><li><a href="global.html#updateCategoryGroupData">updateCategoryGroupData</a></li><li><a href="global.html#updateCategorySelection">updateCategorySelection</a></li><li><a href="global.html#updateCheckerName">updateCheckerName</a></li><li><a href="global.html#updateCheckingResourceData">updateCheckingResourceData</a></li><li><a href="global.html#updateContributorName">updateContributorName</a></li><li><a href="global.html#updateGitRemotes">updateGitRemotes</a></li><li><a href="global.html#updateGroupIndexForGl">updateGroupIndexForGl</a></li><li><a href="global.html#updateLanguage">updateLanguage</a></li><li><a href="global.html#updateMergeConflictNextButton">updateMergeConflictNextButton</a></li><li><a href="global.html#updateOrigLangPaneSettings">updateOrigLangPaneSettings</a></li><li><a href="global.html#updateProjectFolderToNameSpecification">updateProjectFolderToNameSpecification</a></li><li><a href="global.html#updateProjectLastOpened">updateProjectLastOpened</a></li><li><a href="global.html#updateProjectNameIfNecessary">updateProjectNameIfNecessary</a></li><li><a href="global.html#updateProjectNameIfNecessaryAndDoPrompting">updateProjectNameIfNecessaryAndDoPrompting</a></li><li><a href="global.html#updateProjectResourcesForTn">updateProjectResourcesForTn</a></li><li><a href="global.html#updateProjectVersion">updateProjectVersion</a></li><li><a href="global.html#updateResourcesForFile">updateResourcesForFile</a></li><li><a href="global.html#updateResourcesForOpenTool">updateResourcesForOpenTool</a></li><li><a href="global.html#updateSourceContentUpdaterManifest">updateSourceContentUpdaterManifest</a></li><li><a href="global.html#updateStepperIndex">updateStepperIndex</a></li><li><a href="global.html#updateSubcategorySelection">updateSubcategorySelection</a></li><li><a href="global.html#updateTargetVerse">updateTargetVerse</a></li><li><a href="global.html#updateToolProperties">updateToolProperties</a></li><li><a href="global.html#updateVersionSelection">updateVersionSelection</a></li><li><a href="global.html#upfdateOverwritePermittedInProjectInformationCheckReducer">upfdateOverwritePermittedInProjectInformationCheckReducer</a></li><li><a href="global.html#uploadProject">uploadProject</a></li><li><a href="global.html#userTimestampObject">userTimestampObject</a></li><li><a href="global.html#useStableProp">useStableProp</a></li><li><a href="global.html#usingOldGitVersion">usingOldGitVersion</a></li><li><a href="global.html#validate">validate</a></li><li><a href="global.html#validateBookId">validateBookId</a></li><li><a href="global.html#validateContextIdQuote">validateContextIdQuote</a></li><li><a href="global.html#validateProject">validateProject</a></li><li><a href="global.html#verifyAllRequiredFieldsAreCompleted">verifyAllRequiredFieldsAreCompleted</a></li><li><a href="global.html#verifyChunks">verifyChunks</a></li><li><a href="global.html#verifyProjectType">verifyProjectType</a></li><li><a href="global.html#verifyThisIsTCoreOrTStudioProject">verifyThisIsTCoreOrTStudioProject</a></li><li><a href="global.html#versionCompare">versionCompare</a></li><li><a href="global.html#visibleGroupItems">visibleGroupItems</a></li><li><a href="global.html#warnOnInvalidations">warnOnInvalidations</a></li><li><a href="global.html#withLocale">withLocale</a></li><li><a href="global.html#writeDataFile">writeDataFile</a></li><li><a href="global.html#writeDataFileSync">writeDataFileSync</a></li><li><a href="global.html#writeLogSync">writeLogSync</a></li><li><a href="global.html#writeToFS">writeToFS</a></li><li><a href="global.html#writeUSFM">writeUSFM</a></li><li><a href="global.html#zipCSVData">zipCSVData</a></li></ul>
  </nav>

  <div id="main">
    
      <h1 class="page-title">
        helpers/ResourcesHelpers.js
      </h1>
    

    
      

<section>
  <article>
    <pre class="prettyprint source linenums"><code>/* eslint-disable no-undef */
/* eslint-disable no-console */
import fs from 'fs-extra';
import path from 'path-extra';
import AdmZip from 'adm-zip';
import isEqual from 'deep-equal';
import _ from 'lodash';
import {
  apiHelpers,
  getOtherTnsOLVersions,
  resourcesDownloadHelpers,
  resourcesHelpers,
} from 'tc-source-content-updater';
// actions
import {
  addObjectPropertyToManifest,
  loadCurrentCheckCategories,
} from '../actions/ProjectDetailsActions';
import {
  getBibles,
  getProjectSaveLocation,
  getProjectBookId,
  getToolGatewayLanguage,
  getToolGlOwner,
} from '../selectors';
import * as Bible from '../common/BooksOfTheBible';
import {
  APP_VERSION,
  CN_ORIG_LANG_OWNER,
  DEFAULT_GATEWAY_LANGUAGE,
  DEFAULT_OWNER,
  DEFAULT_ORIG_LANG_OWNER,
  ORIGINAL_LANGUAGE,
  SOURCE_CONTENT_UPDATER_MANIFEST,
  STATIC_RESOURCES_PATH,
  toolCardCategories,
  TARGET_LANGUAGE,
  TARGET_BIBLE,
  TC_VERSION,
  TRANSLATION_WORDS,
  TRANSLATION_NOTES,
  TRANSLATION_HELPS,
  TRANSLATION_ACADEMY,
  USER_RESOURCES_PATH,
  USFMJS_VERSION,
} from '../common/constants';
// helpers
import * as BibleHelpers from './bibleHelpers';
import { getValidGatewayBiblesForTool } from './gatewayLanguageHelpers';
import * as SettingsHelpers from './SettingsHelpers';
import ProjectAPI from './ProjectAPI';
import ResourceAPI from './ResourceAPI';
import {
  generateChapterGroupData,
  generateChapterGroupIndex,
} from './groupDataHelpers';
import { generateTimestamp } from './TimestampGenerator';
import { getContextIdPathFromIndex } from './contextIdHelpers';

// constants
export const QUOTE_MARK = '\u2019';

/**
 * append owner to key
 * @param key
 * @param owner
 * @return {string}
 */
export function addOwner(key, owner) {
  const result = `${key}${apiHelpers.OWNER_SEPARATOR}${owner}`;
  return result;
}

/**
 * array of checks for groupId
 * @param {Array} resourceData
 * @param {object} matchRef
 * @return {number}
 */
function getReferenceCount(resourceData, matchRef) {
  let count = 0;

  for (let resource of resourceData) {
    if (isEqual(resource.contextId.reference, matchRef)) {
      count++;
    }
  }
  return count;
}

/**
 * compares quotes, with fallback to old handling of quote marks
 * @param projectCheckQuote
 * @param resourceQuote
 * @return {*|boolean}
 */
export function areQuotesEqual(projectCheckQuote, resourceQuote) {
  let same = isEqual(projectCheckQuote, resourceQuote);

  if (!same) { // if not exactly the same, check for old quote handling in project quote
    // a quick sanity check, the old quote would be longer if the quote mark is split out
    if (Array.isArray(projectCheckQuote) &amp;&amp; Array.isArray(resourceQuote) &amp;&amp; projectCheckQuote.length > resourceQuote.length) {
      let index = projectCheckQuote.findIndex(item => (item.word === QUOTE_MARK)); // look for quote mark
      const quoteMarkFound = index > 1;

      if (quoteMarkFound) { // if quote mark split out, migrate to new format
        const newQuote = _.cloneDeep(projectCheckQuote);
        let done = false;

        while (!done) {
          if (index > 1) {
            // move quote mark to previous word
            const previousItem = newQuote[index - 1];
            previousItem.word += QUOTE_MARK;
            newQuote.splice(index, 1);
            index = newQuote.findIndex(item => (item.word === QUOTE_MARK));
          } else {
            done = true;
          }
        }

        same = isEqual(newQuote, resourceQuote);
      }
    }
  }
  return same;
}

/**
 * removes user resources that are outdated
 * param {string} resourcesFolder - path to user resources
 */
export function removeOutDatedResources(resourcesFolder = USER_RESOURCES_PATH ) {
  const neededManifestVersion = USFMJS_VERSION;

  if (!neededManifestVersion) {
    console.error(`removeOutDatedResources() - could not read usfm-js version`);
  }

  const bibleResManifestKey = 'usfm-js';
  const resourcesLanguages = getFilteredSubFolders(resourcesFolder);

  for ( const languageId of resourcesLanguages) {
    const userLanguageResource = path.join(resourcesFolder, languageId);
    const biblesPath = path.join(userLanguageResource, 'bibles');
    const bibles = getFilteredSubFolders(biblesPath);

    for (const bible of bibles) {
      const versionsPath = path.join(biblesPath, bible);
      const versions = getFilteredSubFolders(versionsPath);

      for (const version of versions) {
        const versionPath = path.join(versionsPath, version);
        const manifestPath = path.join(versionPath, 'manifest.json');

        if (fs.existsSync(manifestPath)) {
          try {
            const manifest = fs.readJsonSync(manifestPath);
            const localResourceKey = manifest?.[bibleResManifestKey];

            if (localResourceKey !== neededManifestVersion) { // if local manifest key does not match required
              console.log(`removeOutDatedResources() - removing incompatible local resource ${versionPath}, manifest key: ${bibleResManifestKey}=${localResourceKey}, needed version is ${neededManifestVersion}`);
              fs.removeSync(versionPath);
            }
          } catch (e) {
            console.warn(`removeOutDatedResources() - could not remove resource from ${versionPath}`);
          }
        }
      }
    }
  }
}

/**
 * update old resource data
 * @param {String} resourcesPath - base path to find resource index
 * @param {String} bookId
 * @param {Object} data - resource data to update
 * @return {boolean} true if resource data was modified
 */
export function updateCheckingResourceData(resourcesPath, bookId, data) {
  let dataModified = false;
  const resourcePath = path.join(resourcesPath, bookId, data.contextId.groupId + '.json');

  if (fs.existsSync(resourcePath)) {
    const resourceData = fs.readJsonSync(resourcePath);

    if (resourceData) {
      let matchFound = false;

      for (let resource of resourceData) {
        if (data.contextId.groupId === resource.contextId.groupId &amp;&amp;
              isEqual(data.contextId.reference, resource.contextId.reference) &amp;&amp;
              data.contextId.occurrence === resource.contextId.occurrence) {
          if (!areQuotesEqual(data.contextId.quote, resource.contextId.quote)) { // quotes are  not the same
            if (data.contextId.checkId) {
              if (data.contextId.checkId === resource.contextId.checkId) {
                matchFound = true; // found match
              }
            } else { // there is not a check ID in this check, so we try empirical methods
              // if only one check for this verse, then we update presuming that this is just an original language change.
              // If more than one check in this groupID for this verse, we skip since it would be too easy to change the quote in the wrong check
              const count = getReferenceCount(resourceData, resource.contextId.reference);
              matchFound = (count === 1);
            }

            if (matchFound) {
              data.contextId.quote = resource.contextId.quote; // update quote
              data.contextId.quoteString = resource.contextId.quoteString; // update quoteString

              if (!data.contextId.checkId &amp;&amp; resource.contextId.checkId) {
                data.contextId.checkId = resource.contextId.checkId; // add check ID
              }
              dataModified = true;
            }
          } else { // quotes match
            if (data.contextId.checkId) {
              if (data.contextId.checkId === resource.contextId.checkId) {
                matchFound = true;
              }
            } else { // no check id in current check, and quotes are similar
              matchFound = true;

              // see if there is a checkId to be added
              if (resource.contextId.checkId) {
                data.contextId.checkId = resource.contextId.checkId; // save checkId
                dataModified = true;
              }
            }

            if (matchFound &amp;&amp; !isEqual(data.contextId.quote, resource.contextId.quote)) {
              // if quotes not exactly the same, update
              data.contextId.quote = resource.contextId.quote;
              data.contextId.quoteString = resource.contextId.quoteString;
              dataModified = true;
            }
          }

          if (matchFound) {
            break;
          }
        }
      }

      if (!matchFound) {
        console.warn('updateCheckingResourceData() - resource not found for migration: ' + JSON.stringify(data));
      }
    }
  }
  return dataModified;
}

/**
 * update the resources for this file
 * @param {String} filePath - path of file to update
 * @param {String} toolName
 * @param {String} resourcesPath - path to find resources
 * @param {String} bookId
 * @param {Boolean} isContext - if true, then data is expected to be a contextId, otherwise it contains a contextId
 */
function updateResourcesForFile(filePath, toolName, resourcesPath, bookId, isContext = false) {
  try {
    let data = fs.readJsonSync(filePath);

    if (isContext) {
      data = { contextId: data };
    }

    if (data.contextId) {
      if (data.contextId.groupId &amp;&amp; (data.contextId.tool === toolName)) {
        let dataModified = updateCheckingResourceData(resourcesPath, bookId, data);

        if (dataModified) {
          if (isContext) {
            data = data.contextId;
          }
          fs.outputJsonSync(filePath, data, { spaces: 2 });
        }
      }
    }
  } catch (e) {
    console.error('updateResourcesForFile() - migration error for: ' + filePath, e);
  }
}

/**
 * iterate through checking data to make sure it is up to date
 * @param {String} projectDir - path to project
 * @param {String} toolName
 */
export function migrateOldCheckingResourceData(projectDir, toolName) {
  const checksPath = path.join(projectDir, '.apps/translationCore/checkData');

  if (fs.existsSync(checksPath)) {
    const resourcesPath = path.join(projectDir, '.apps/translationCore/index', toolName);
    const checks = getFoldersInResourceFolder(checksPath);

    if (checks) {
      for (let check of checks) {
        console.log(`migrateOldCheckingResourceData() - migrating ${check} to new format`);
        const checkPath = path.join(checksPath, check);
        const books = getFoldersInResourceFolder(checkPath);

        for (let book of books) {
          const bookPath = path.join(checkPath, book);
          const chapters = getFoldersInResourceFolder(bookPath);

          for (let chapter of chapters) {
            const chapterPath = path.join(bookPath, chapter);
            const verses = getFoldersInResourceFolder(chapterPath);

            for (let verse of verses) {
              const versePath = path.join(chapterPath, verse);
              const files = getFilesInResourcePath(versePath, '.json');

              for (let file of files) {
                const filePath = path.join(versePath, file);
                updateResourcesForFile(filePath, toolName, resourcesPath, book);
              }
            }
          }

          const contextIdPath = path.join(resourcesPath, book, 'currentContextId/contextId.json'); // migrate current contextId

          if (fs.existsSync(contextIdPath)) {
            updateResourcesForFile(contextIdPath, toolName, resourcesPath, book, true);
          }
        }
      }
    }
    console.log('migrateOldCheckingResourceData() - migration done');
  }
}

/**
 * Copies all of a tool's group data from the global resources into a project.
 * This is boiler plate to keep a separation of concerns between the global resources and projects.
 * NOTE: this is designed to work on any gateway language, however it should only be with original languages for tW.
 * @param {string} gatewayLanguage - the gateway language code
 * @param {string} toolName - the name of the tool for which helps will be copied
 * @param {string} projectDir - path to the project directory
 * @param {function} dispatch - dispatch function
 * @param {boolean} glChange - defaults to false, set to true if the GL has changed
 * @param {string} glOwner
 */
export function copyGroupDataToProject(gatewayLanguage, toolName, projectDir, dispatch, glChange = false, glOwner = DEFAULT_OWNER) {
  const project = new ProjectAPI(projectDir);
  const resources = ResourceAPI.default();
  const helpDir = resources.getLatestTranslationHelp(gatewayLanguage, toolName, glOwner);

  if (helpDir) {
    project.resetCategoryGroupIds(toolName);
    const groupDataUpdated = glChange || project.hasNewGroupsData(toolName, glOwner);
    const isTN = toolName === TRANSLATION_NOTES;

    if (groupDataUpdated) {
      project.resetLoadedCategories(toolName);

      if (isTN) {
        const tHelpsManifest = fs.readJsonSync(path.join(helpDir, 'manifest.json'));
        const { relation } = tHelpsManifest.dublin_core || {};
        dispatch(addObjectPropertyToManifest('tsv_relation', relation));
      }
    }

    const categories = getAvailableCategories(gatewayLanguage, toolName, projectDir, {}, glOwner);
    // In some older projects the category was saved in the .categories file instead of the subcategories.
    project.setCurrentCategories(toolName, categories);

    const groupsDataLoaded = project.getLoadedCategories(toolName);
    const categoryKeys = Object.keys(categories);

    for (let i = 0, l = categoryKeys.length; i &lt; l; i++) {
      const category = categoryKeys[i];
      const resourceCategoryDir = path.join(helpDir, category, 'groups', project.getBookId());
      const altResourceCategoryDir = path.join(helpDir, 'groups', project.getBookId());
      let groupsDir = resourceCategoryDir;

      if (!fs.pathExistsSync(resourceCategoryDir)) {
        groupsDir = altResourceCategoryDir;
      }

      for (let j = 0, l2 = categories[category].length; j &lt; l2; j++) {
        const subCategory = categories[category][j];
        const dataPath = path.join(groupsDir, subCategory + '.json');
        project.importCategoryGroupData(toolName, dataPath, groupsDataLoaded);
      }
      // TRICKY: gives the tool an index of which groups belong to which category
      project.setCategoryGroupIds(toolName, category, categories[category]);

      // loading complete
      for (let k = 0, l3 = categories[category].length; k &lt; l3; k++) {
        const subCategory = categories[category][k];
        project.setCategoryLoaded(toolName, subCategory);
      }
    }
    project.removeStaleCategoriesFromCurrent(toolName);

    if (isTN) {
      const categoriesPath = project.getCategoriesPath(toolName);

      if (fs.existsSync(categoriesPath)) {
        // update languageId in categories
        const categories = fs.readJsonSync(categoriesPath);

        if (categories) {
          categories.languageId = gatewayLanguage;
          fs.outputJsonSync(categoriesPath, categories);
        }
      }
    }

    if (groupDataUpdated) {
      migrateOldCheckingResourceData(projectDir, toolName);
      // update categories owner
      const categoriesPath = project.getCategoriesPath(toolName);

      if (fs.pathExistsSync(categoriesPath)) {
        try {
          let rawData = fs.readJsonSync(categoriesPath);
          rawData.owner = glOwner;
          fs.writeJsonSync(categoriesPath, rawData);
        } catch (e) {
          console.warn(
            `copyGroupDataToProject() - Failed to update tool categories index at ${categoriesPath}.`, e);
        }
      }
    }
  } else {
    // generate chapter-based group data
    const groupsDataDirectory = project.getCategoriesDir(toolName);
    const bookDataDir = project.getBookDataDir();
    const data = generateChapterGroupData(project.getBookId(), toolName, bookDataDir);

    data.forEach(groupData => {
      const groupId = groupData[0].contextId.groupId;
      const fileName = groupId + '.json';
      ensureFileContentsJson(groupsDataDirectory, fileName, groupData);
    });
  }
}

/**
 * make sure file contents have the latest data
 * @param {String} folder
 * @param {String} filename
 * @param {object} data
 */
export function ensureFileContentsJson(folder, filename, data) {
  const filePath = path.join(folder, filename);

  try {
    fs.ensureDirSync(folder);
    let valid = fs.existsSync(filePath);

    if (valid) {
      try {
        const fileData = fs.readJsonSync(filePath);
        valid = isEqual(data, fileData);
      } catch (e) {
        console.error(`ensureFileContentsJson() - error reading ${filePath}`, e);
        valid = false;
      }
    }

    if (!valid) {
      fs.outputJsonSync(filePath, data, { spaces: 2 });
    }
  } catch (e) {
    console.error(`ensureFileContentsJson() - error updating ${filePath}`, e);
  }
}

/**
 * get available categories
 * @param {String} gatewayLanguage
 * @param {String} toolName
 * @param {String} projectDir
 * @param {object} options = { withCategoryName: true } will return an
 * array of objects instead, which include the category id &amp; name.
 * @param {string} owner
 */
export function getAvailableCategories(gatewayLanguage = 'en', toolName, projectDir, options = {}, owner = DEFAULT_OWNER) {
  const categoriesObj = {};
  const project = new ProjectAPI(projectDir);
  const resources = ResourceAPI.default();

  if (toolName === TRANSLATION_WORDS){
    if (owner === apiHelpers.DOOR43_CATALOG) { // for tW we use OrigLang if owner is D43 Catalog
      const manifest = project.getManifest();
      const bookId = manifest &amp;&amp; manifest.project &amp;&amp; manifest.project.id;
      const { languageId } = BibleHelpers.getOrigLangforBook(bookId);
      gatewayLanguage = languageId;
    }
  }

  const helpDir = resources.getLatestTranslationHelp(gatewayLanguage, toolName, owner);
  // list help categories

  if (helpDir) {
    const categories = fs.readdirSync(helpDir).filter(file => fs.lstatSync(path.join(helpDir, file)).isDirectory());

    if (categories.length === 0) {
      throw new Error(`Missing translationHelp categories for ${toolName}`);
    }

    for (let category of categories) {
      if (Object.keys(toolCardCategories).includes(category)) {
        const subCategories = [];
        // TRICKY: some helps do not have groups nested under categories
        const resourceCategoryDir = path.join(helpDir, category, 'groups', project.getBookId());
        const altResourceCategoryDir = path.join(helpDir, 'groups', project.getBookId());
        let groupsDir = resourceCategoryDir;

        if (!fs.pathExistsSync(resourceCategoryDir)) {
          groupsDir = altResourceCategoryDir;
        }

        let groupIndex;
        const groupIndexPath = path.join(helpDir, category, 'index.json');

        if (options.withCategoryName &amp;&amp; fs.existsSync(groupIndexPath)) {
          groupIndex = fs.readJsonSync(groupIndexPath);
        }

        // copy not loaded category group data into project
        if (fs.pathExistsSync(groupsDir)) {
          const files = fs.readdirSync(groupsDir);

          for (const f of files) {
            if (path.extname(f).toLowerCase() === '.json') {
              const id = path.basename(f.toLowerCase(), '.json');
              let subCategory = id;

              // Use an object that includes id &amp; name instead of just a string
              if (options.withCategoryName) {
                subCategory = { id };

                if (groupIndex) {
                  subCategory = groupIndex.find(group => group.id === id);
                }
              }

              subCategories.push(subCategory);
            }
          }
        }
        categoriesObj[category] = subCategories;
      }
    }
  }

  return categoriesObj;
}


/**
 * Configures the project have selected the default categories.
 * If category selections already exist this method will be a no-op.
 * @param {string} gatewayLanguage - the gateway language code
 * @param {string} toolName - the name of the tool for which selections will be made
 * @param {string} projectDir - path to the project directory
 * @param {string} owner
 */
export function setDefaultProjectCategories(gatewayLanguage, toolName, projectDir, owner) {
  const project = new ProjectAPI(projectDir);
  const resources = ResourceAPI.default();
  const helpDir = resources.getLatestTranslationHelp(gatewayLanguage, toolName, owner);
  let categories = [];

  if (helpDir &amp;&amp; project.getSelectedCategories(toolName).length === 0) {
    let parentCategories = fs.readdirSync(helpDir).filter(file => fs.lstatSync(path.join(helpDir, file)).isDirectory());

    for (let i = 0, l = parentCategories.length; i &lt; l; i++) {
      const categoryId = parentCategories[i];
      categories = categories.concat(project.getCategoryGroupIds(toolName, categoryId));
    }

    if (categories.length > 0) {
      project.setSelectedCategories(toolName, categories);
    }
  }
}

/**
 * make sure that the group index data and contextId are up to date on GL change.  Currently only tN depends on GL
 * @param {string} toolName
 * @param {string} selectedGL
 * @param {string} owner
 */
export function updateGroupIndexForGl(toolName, selectedGL, owner) {
  return ((dispatch, getState) => {
    console.log(`updateGroupIndexForGl(${toolName}, ${selectedGL})`);
    const state = getState();
    const projectDir = getProjectSaveLocation(state);

    try {
      const projectApi = new ProjectAPI(projectDir);
      const categoriesPath = projectApi.getCategoriesPath(toolName);

      if (fs.existsSync(categoriesPath)) {
        const categories = fs.readJsonSync(categoriesPath);

        const glUnchanged = (categories?.languageId === selectedGL) &amp;&amp;
          (categories?.owner === owner);

        if (glUnchanged) {
          console.log('updateGroupIndexForGl() - language/owner unchanged, skipping');
          return; // we don't need to do anything since language hasn't changed
        }
      }
      console.log('updateGroupIndexForGl() - calling copyGroupDataToProject() to get latest from tN helps');
      copyGroupDataToProject(selectedGL, toolName, projectDir, dispatch, true, owner); // copy group data for GL
      let groupId = null;
      let contextId = null;
      const bookId = getProjectBookId(state);

      if (bookId) {
        const loadPath = getContextIdPathFromIndex(projectDir, toolName, bookId);

        if (fs.existsSync(loadPath)) {
          contextId = fs.readJsonSync(loadPath);
          groupId = contextId &amp;&amp; contextId.groupId;
        }
      }
      console.log('updateGroupIndexForGl() - updating saved contextId() for new GL');

      if (contextId &amp;&amp; groupId) {
        // need to update occurrenceNote in current contextId from checks
        const groupData = projectApi.getGroupData(toolName, groupId);

        for (let check of groupData) {
          // find check that matches current contextId
          if (isEqual(contextId.reference, check.contextId.reference) &amp;&amp;
            contextId.occurrence === check.contextId.occurrence) {
            // if we found match, then update occurrenceNote in current contextId for tool
            contextId.occurrenceNote = check.contextId.occurrenceNote;
            const loadPath = getContextIdPathFromIndex(projectDir, toolName, bookId);
            fs.outputJsonSync(loadPath, contextId);
            break;
          }
        }
      }
      console.log('updateGroupIndexForGl() - calling loadCurrentCheckCategories()');
      dispatch(loadCurrentCheckCategories(toolName, projectDir, selectedGL, owner));
    } catch (e) {
      console.error(`updateGroupIndexForGl(${toolName} - error updating current context`, e);
    }
  });
}

/**
 * Loads all of a tool's group data from the project.
 * @param {string} toolName - the name of the tool who's helps will be loaded
 * @param {string} projectDir - the absolute path to the project
 * @returns {*}
 */
export function loadProjectGroupData(toolName, projectDir) {
  const project = new ProjectAPI(projectDir);
  return project.getGroupsData(toolName);
}

/**
 * Loads the groups index from the global resources.
 * This is used primarily for generating the groups menu.
 * This is boiler plate to keep a separation of concerns between the global resources and projects.
 * TODO: the groups index should be copied into the project as part of {@link copyGroupDataToProject} and loaded from the project instead of the global resources.
 * @param {string} gatewayLanguage - the gateway language code
 * @param {string} toolName - the name of the tool who's index will be loaded
 * @param {string} projectDir - path to the project directory
 * @param {function} translate - the locale function. TODO: refactor index loading so locale is not required
 * @return {*}
 */
export function loadProjectGroupIndex(
  gatewayLanguage, toolName, projectDir, translate) {
  const project = new ProjectAPI(projectDir);
  const resources = ResourceAPI.default();
  const helpDir = resources.getLatestTranslationHelp(gatewayLanguage, toolName);

  if (helpDir) {
    // load indices
    const indices = [];
    const categories = project.getSelectedCategories(toolName, true);

    for (const categoryName in categories) {
      const categoryIndex = path.join(helpDir, categoryName, 'index.json');

      if (fs.existsSync(categoryIndex)) {
        try {
          const selectedSubcategories = categories[categoryName];
          // For categories with subcategories need to filter out not selected items.
          const categoryIndices = fs.readJsonSync(categoryIndex)
            .filter(item => selectedSubcategories.includes(item.id));
          indices.push.apply(indices, categoryIndices);
        } catch (e) {
          console.error(`Failed to read group index from ${categoryIndex}`, e);
        }
      } else {
        console.warn(`Unexpected tool category selection in ${projectDir}. "${categoryIndex}" could not be found.`);
      }
    }
    return indices;
  } else {
    // generate indices
    return generateChapterGroupIndex(translate);
  }

  // TODO: the export needs to have the groups index so we need to run this when selecting a tool _and_ when exporting.
}

/**
 * makes sure the source-content-updater-manifest.json has latest time and tCore version
 * @param dateStr - optional date string to use, if not given with use current
 */
export const updateSourceContentUpdaterManifest = (dateStr = null) => {
  const manifestPath = path.join(USER_RESOURCES_PATH,
    SOURCE_CONTENT_UPDATER_MANIFEST);
  const oldManifest = readJsonFile(manifestPath) || {};
  const newManifest = {
    ...oldManifest,
    modified: generateTimestamp(dateStr),
    [TC_VERSION]: APP_VERSION,
  };
  fs.ensureDirSync(USER_RESOURCES_PATH);
  console.log(`updateSourceContentUpdaterManifest() - updated ${manifestPath} to `, newManifest);
  fs.outputJsonSync(manifestPath, newManifest, { spaces: 2 });
};

/**
 * read json file with error recovery, returns null on error
 * @param filePath
 * @return {*}
 */
function readJsonFile(filePath) {
  try {
    const data = fs.readJSONSync(filePath);
    return data;
  } catch (e) {
    console.warn(`readJsonFile() - error reading ${filePath}`);
  }
  return null;
}

/**
 * copies the source-content-updater-manifest.json from tc to the users folder
 */
export const copySourceContentUpdaterManifest = () => {
  const sourceContentUpdaterManifestPath = path.join(STATIC_RESOURCES_PATH,
    SOURCE_CONTENT_UPDATER_MANIFEST);

  if (fs.existsSync(sourceContentUpdaterManifestPath)) {
    const bundledManifest = readJsonFile(sourceContentUpdaterManifestPath) || {};
    bundledManifest[TC_VERSION] = APP_VERSION; // add app version to resource
    const userSourceContentUpdaterManifestPath = path.join(USER_RESOURCES_PATH,
      SOURCE_CONTENT_UPDATER_MANIFEST);
    fs.ensureDirSync(USER_RESOURCES_PATH);
    const userManifest = readJsonFile(userSourceContentUpdaterManifestPath) || {};
    const newManifest = {
      ...userManifest,
      ...bundledManifest,
    };
    console.log(`copySourceContentUpdaterManifest() - updated ${userSourceContentUpdaterManifestPath} to `, newManifest);
    fs.outputJsonSync(userSourceContentUpdaterManifestPath, newManifest, { spaces: 2 });
  }
};

/**
 * checks if bundled resources are newer than installed resources
 * @return {boolean} - true if bundled resources are newer
 */
export const areResourcesNewer = () => {
  const userSourceContentUpdaterManifestPath = path.join(USER_RESOURCES_PATH,
    SOURCE_CONTENT_UPDATER_MANIFEST);

  if (!fs.existsSync(userSourceContentUpdaterManifestPath)) {
    console.log(
      `%c areResourcesNewer() - no source content manifest: ${userSourceContentUpdaterManifestPath}`,
      'color: #00539C',
    );
    return true;
  }

  const sourceContentUpdaterManifestPath = path.join(STATIC_RESOURCES_PATH,
    SOURCE_CONTENT_UPDATER_MANIFEST);

  if (!fs.existsSync(sourceContentUpdaterManifestPath)) {
    console.error('sourceContentUpdaterManifest does not exist');
    return false;
  }

  const bundledManifest = fs.readJSONSync(sourceContentUpdaterManifestPath);
  const bundledModified = bundledManifest &amp;&amp; bundledManifest.modified;
  const userManifest = fs.readJSONSync(userSourceContentUpdaterManifestPath);
  const userModified = userManifest &amp;&amp; userManifest.modified;

  const tCoreVersion = userManifest &amp;&amp; userManifest[TC_VERSION];

  if (tCoreVersion !== APP_VERSION) { // TRICKY: for safety we refresh on any difference of version dates in case resources not compatible with newer or older version of tCore
    console.log(
      `%c areResourcesNewer() - tCore version changed from ${tCoreVersion} to ${APP_VERSION}, updating all`,
      'color: #00539C',
    );
    return true;
  }

  const newer = bundledModified > userModified;

  console.log(
    `%c areResourcesNewer() - resource modified time from ${userModified} to ${bundledModified}` + (newer ? ', NEWER - updating all' : ', NOT NEWER!'),
    'color: #00539C',
  );
  return newer;
};

/**
 * unzip versioned resources in resourceDestinationPath
 * @param {String} resourceDestinationPath
 * @param {Boolean} isBible - true if resource is bible
 */
export const extractZippedResourceContent = (resourceDestinationPath, isBible) => {
  const versions = ResourceAPI.listVersions(resourceDestinationPath);

  for (const version of versions) {
    const versionPath = path.join(resourceDestinationPath, version);
    const filename = isBible ? 'books.zip' : 'contents.zip';
    const contentZipPath = path.join(versionPath, filename);

    if (fs.existsSync(contentZipPath)) {
      console.log(`extractZippedResourceContent: unzipping ${contentZipPath}`);
      const zip = new AdmZip(contentZipPath);
      zip.extractAllTo(versionPath, /*overwrite*/true);

      if (fs.existsSync(contentZipPath)) {
        fs.removeSync(contentZipPath);
      }
    }
  }
};

/**
 * @description Helper function to get a bibles manifest file from the bible resources folder.
 * @param {string} bibleVersionPath - path to a bibles version folder.
 * @param {string} bibleID - bible name. ex. bhp, uhb, udt, ult.
 */
export function getBibleManifest(bibleVersionPath, bibleID) {
  let fileName = 'manifest.json';
  let bibleManifestPath = path.join(bibleVersionPath, fileName);
  let manifest;

  if (fs.existsSync(bibleManifestPath)) {
    manifest = fs.readJsonSync(bibleManifestPath);
  } else {
    console.error(
      `getBibleManifest() - Could not find manifest for ${bibleID} at ${bibleManifestPath}`);
  }
  return manifest;
}

/**
 * @description Helper function to get a bibles index from the bible resources folder.
 * @param {string} languageId
 * @param {string} bibleId - bible name. ex. bhp, uhb, udt, ult.
 * @param {string} bibleVersion - optional release version, if null then get latest
 * @param {string} owner
 */
export function getBibleIndex(languageId, bibleId, bibleVersion, owner) {
  const STATIC_RESOURCES_BIBLES_PATH = path.join(STATIC_RESOURCES_PATH, languageId, 'bibles');
  const fileName = 'index.json';
  let bibleIndexPath;

  if (bibleVersion) {
    bibleIndexPath = path.join(STATIC_RESOURCES_BIBLES_PATH, bibleId,
      bibleVersion, fileName);
  } else {
    const versionPath = ResourceAPI.getLatestVersion(
      path.join(STATIC_RESOURCES_BIBLES_PATH, bibleId), owner);

    if (versionPath) {
      bibleIndexPath = path.join(versionPath, fileName);
    } else {
      console.error(`getBibleIndex() - versionPath is undefined`);
    }
  }

  let index;

  if (fs.existsSync(bibleIndexPath)) {
    index = fs.readJsonSync(bibleIndexPath);
  } else {
    console.error('Could not find index for ' + bibleId + ' ' + bibleVersion);
  }
  return index;
}

/**
 * Returns an array of versions found in the path that start with [vV]\d
 * @param {String} resourcePath - base path to search for versions
 * @return {Array} - array of versions, e.g. ['v1', 'v10', 'v1.1']
 */
export function getVersionsInPath(resourcePath) {
  return resourcesHelpers.getVersionsInPath(resourcePath);
}

/**
 * Returns a sorted an array of versions so that numeric parts are properly ordered (e.g. v10a &lt; v100)
 * @param {Array} versions - array of versions unsorted: ['v05.5.2', 'v5.5.1', 'V6.21.0', 'v4.22.0', 'v6.1.0', 'v6.1a.0', 'v5.1.0', 'V4.5.0']
 * @return {Array} - array of versions sorted:  ["V4.5.0", "v4.22.0", "v5.1.0", "v5.5.1", "v05.5.2", "v6.1.0", "v6.1a.0", "V6.21.0"]
 */
export function sortVersions(versions) {
  // Don't sort if null, empty or not an array
  if (!versions || !Array.isArray(versions)) {
    return versions;
  }

  // Only sort of all items are strings
  for (let i = 0, len = versions.length; i &lt; len; ++i) {
    if (typeof versions[i] !== 'string') {
      return versions;
    }
  }
  versions.sort(
    (a, b) => String(a).localeCompare(b, undefined, { numeric: true }));
  return versions;
}

export function getLanguageIdsFromResourceFolder(bookId) {
  try {
    let languageIds = getFilesInResourcePath(USER_RESOURCES_PATH);

    // if its an old testament project remove greek from languageIds.
    if (BibleHelpers.isOldTestament(bookId)) {
      languageIds = languageIds.filter(languageId => languageId !== Bible.NT_ORIG_LANG);
    } else { // else if its a new testament project remove hebrew from languageIds.
      languageIds = languageIds.filter(languageId => languageId !== Bible.OT_ORIG_LANG);
    }
    languageIds = languageIds.filter(languageID => {
      let valid = (fs.lstatSync(path.join(USER_RESOURCES_PATH, languageID)).isDirectory());
      return valid;
    });
    return languageIds;
  } catch (error) {
    console.error(error);
  }
}

/**
 * add language ID to languageIds if not present
 * @param {Array} languageIds
 * @param {String} languageID
 */
export function addLanguage(languageIds, languageID) {
  if (!languageIds.includes(languageID)) { // make sure we have OL
    languageIds.push(languageID);
  }
}

/**
 * add resource to resources if not present
 * @param {Array} resources
 * @param {String} languageId
 * @param {String} bibleId
 * @param {String} owner
 */
export function addResource(resources, languageId, bibleId, owner = DEFAULT_OWNER) {
  if (!languageId) {
    throw new Error('Error when adding resource. languageId is not valid.');
  }

  const pos = resources.findIndex(resource =>
    ((resource.languageId === languageId) &amp;&amp; (resource.bibleId === bibleId) &amp;&amp; (resource.owner === owner)),
  );

  if (pos &lt; 0) { // if we don't have resource
    resources.push({
      bibleId,
      languageId,
      owner,
    });
  }
}

/**
 * populates resourceList with resources that can be used in scripture pane
 * @param {Array} resourceList - array to be populated with resources
 * @return {Function}
 * //TODO: This is not an action. Please clean up to take in the state as an argument.
 */
export function getAvailableScripturePaneSelections(resourceList) {
  return ((dispatch, getState) => {
    try {
      resourceList.splice(0, resourceList.length); // remove any pre-existing elements
      const state = getState();
      const { resourcesReducer: { bibles } } = state;
      const bookId = getProjectBookId(state);
      const languagesIds = getLanguageIdsFromResourceFolder(bookId);

      // add target Bible if in resource reducer
      if (bibles &amp;&amp; bibles[TARGET_LANGUAGE] &amp;&amp; bibles[TARGET_LANGUAGE][TARGET_BIBLE]) {
        const resource = {
          bookId,
          bibleId: TARGET_BIBLE,
          languageId: TARGET_LANGUAGE,
          manifest: bibles[TARGET_LANGUAGE][TARGET_BIBLE].manifest,
        };
        resourceList.push(resource);
      }

      // load source bibles
      languagesIds.forEach((languageId) => {
        const biblesPath = path.join(USER_RESOURCES_PATH, languageId, 'bibles');

        if (fs.existsSync(biblesPath)) {
          const biblesFolders = fs.readdirSync(biblesPath)
            .filter(folder => folder !== '.DS_Store') || [];

          biblesFolders.forEach(bibleId => {
            const bibleIdPath = path.join(biblesPath, bibleId);
            const owners = ResourceAPI.getLatestVersionsAndOwners(bibleIdPath) || {};

            for (const owner of Object.keys(owners)) {
              let bibleLatestVersion = owners[owner];

              if (bibleLatestVersion) {
                const pathToBibleManifestFile = path.join(bibleLatestVersion,
                  'manifest.json');

                try {
                  const manifestExists = fs.existsSync(pathToBibleManifestFile);
                  const bookExists = fs.existsSync(
                    path.join(bibleLatestVersion, bookId, '1.json'));

                  if (manifestExists &amp;&amp; bookExists) {
                    let languageId_ = languageId;

                    if (BibleHelpers.isOriginalLanguage(languageId)) {
                      languageId_ = ORIGINAL_LANGUAGE;
                    }

                    const manifest = fs.readJsonSync(pathToBibleManifestFile);

                    if (Object.keys(manifest).length) {
                      const resource = {
                        bookId,
                        bibleId,
                        languageId: languageId_,
                        manifest,
                        owner,
                      };
                      resourceList.push(resource);
                    }
                  }
                } catch (e) {
                  console.warn('Invalid bible: ' + bibleLatestVersion, e);
                }
              }
            }
          });
        } else {
          console.warn('Directory not found, ' + biblesPath);
        }
      });
    } catch (err) {
      console.warn(err);
    }
  });
}

/**
 * gets the resources used in the scripture pane configuration, adds selected GL and adds the OL.  We default to English
 *      for GL.
 * @param {Object} state
 * @param {String} bookId
 * @param {string} toolName - the name of the tool for which resources will be found.
 * @param {string} selectedGL - optional GL language to load
 * @param {string} glOwner_ - optional GL owner, otherwise will get from current tool
 * @return {Array} array of resource in scripture panel
 */
export function getResourcesNeededByTool(state, bookId, toolName, selectedGL, glOwner_) {
  const resources = [];
  const { languageId: olLanguageID, bibleId: olBibleId } = BibleHelpers.getOrigLangforBook(bookId);
  const glOwner= glOwner_ || getToolGlOwner(state, toolName) || DEFAULT_ORIG_LANG_OWNER;
  const currentPaneSettings = _.cloneDeep(SettingsHelpers.getCurrentPaneSetting(state));

  // TODO: hardcoded fixed for 1.1.0, the En ULT is used by the expanded scripture pane &amp; if
  // not found throws an error. Should be addressed later by 4858.
  addResource(resources, 'en', 'ult', glOwner_ || DEFAULT_OWNER);

  if (Array.isArray(currentPaneSettings)) {
    for (let setting of currentPaneSettings) {
      let languageId = setting.languageId;

      switch (languageId) {
      case TARGET_LANGUAGE:
        break;

      case ORIGINAL_LANGUAGE:
        addResource(resources, olLanguageID, setting.bibleId, getOriginalLangOwner(setting.owner || glOwner));
        break; // skip invalid language codes

      default:
        addResource(resources, languageId, setting.bibleId, setting.owner);
        break;
      }
    }
  } else {
    console.warn('No Scripture Pane Configuration');
  }
  addResource(resources, olLanguageID, olBibleId, getOriginalLangOwner(glOwner)); // make sure loaded even if not in pane settings
  const gatewayLangId = selectedGL || getToolGatewayLanguage(state, toolName);
  const biblesLoaded = getBibles(state);
  const validBibles = getValidGatewayBiblesForTool(
    toolName,
    gatewayLangId,
    bookId,
    biblesLoaded,
  );

  if (Array.isArray(validBibles)) {
    for (let bible of validBibles) {
      const { owner, version: bibleId } = resourcesHelpers.splitVersionAndOwner(bible);
      addResource(resources, gatewayLangId, bibleId, owner || apiHelpers.DOOR43_CATALOG);
    }
  }

  return resources;
}

export function getGLQuote(languageId, groupId, toolName) {
  try {
    const GLQuotePathWithoutVersion = path.join(USER_RESOURCES_PATH, languageId, TRANSLATION_HELPS, toolName);
    const versionDirectory = ResourceAPI.getLatestVersion(GLQuotePathWithoutVersion);
    const GLQuotePathIndex = path.join(versionDirectory, 'kt', 'index.json');
    const resourceIndexArray = fs.readJSONSync(GLQuotePathIndex);
    return resourceIndexArray.find(({ id }) => id === groupId).name;
  } catch (e) {
    return null;
  }
}

/**
 * get unfiltered list of resource language ids
 * @param {Boolean} user - if true look in user resources, else check static resources
 * @return {Array} - list of language IDs
 */
export function getAllLanguageIdsFromResourceFolder(user) {
  return getFoldersInResourceFolder(
    user ? USER_RESOURCES_PATH : STATIC_RESOURCES_PATH);
}

/**
 * get list of folders in resource path
 * @param {String} resourcePath - path
 * @return {Array} - list of folders
 */
export function getFoldersInResourceFolder(resourcePath) {
  try {
    const folders = fs.readdirSync(resourcePath).filter(folder =>
      fs.lstatSync(path.join(resourcePath, folder)).isDirectory()); // filter out anything not a folder
    return folders;
  } catch (error) {
    console.error(error);
  }
}

/**
 * get list of files in resource path
 * @param {String} resourcePath - path
 * @param {String|null} [ext=null] - optional extension to match
 * @return {Array}
 */
export function getFilesInResourcePath(resourcePath, ext=null) {
  if (fs.lstatSync(resourcePath).isDirectory()) {
    let files = fs.readdirSync(resourcePath).filter(file => {
      if (ext) {
        return path.extname(file) === ext;
      }
      return file !== '.DS_Store';
    }); // filter out .DS_Store
    return files;
  }
  return [];
}

/**
 * gets the sub folders of folder if it exists and filters out hidden and temp folder names
 * @param {String} folderPath
 * @return {*}
 */
function getFilteredSubFolders(folderPath) {
  const excludedItems = ['imports_processed', 'imports', '.DS_Store'];

  if (fs.existsSync(folderPath)) {
    return fs.readdirSync(folderPath)
      .filter(item => !excludedItems.includes(item))
      .filter(file => fs.lstatSync(path.join(folderPath, file)).isDirectory());
  }
  return [];
}

/**
 * copies missing subfolders from source to destination
 * @param {String} source
 * @param {String} destination
 * @param {String} languageId
 */
function copyMissingSubfolders(source, destination, languageId) {
  const sourceSubFolders = getFilteredSubFolders(source);
  const destinationSubFolders = getFilteredSubFolders(destination);

  sourceSubFolders.forEach((lexicon) => {
    let lexiconMissing = !destinationSubFolders.includes(lexicon);

    if (!lexiconMissing) { // if we have lexicon, make sure we have the latest version installed
      const latestVersion = ResourceAPI.getLatestVersion(path.join(source, lexicon), DEFAULT_OWNER);

      if (latestVersion) {
        const destinationVersionPath = path.join(destination, lexicon, path.basename(latestVersion));
        lexiconMissing = !fs.existsSync(destinationVersionPath);
      }
    }

    if (lexiconMissing) {
      const sourcePath = path.join(source, lexicon);
      const destinationPath = path.join(destination, lexicon);
      fs.copySync(sourcePath, destinationPath);
      console.log(
        `%c Copied ${languageId} lexicon from static lexicons to user resources path.`,
        'color: #0D355A',
      );
    }
  });
}

/**
 * check for lexicons packaged with tc executable.
 */
const checkForNewLexicons = (languageId) => {
  const tcResourcesLexiconPath = path.join(STATIC_RESOURCES_PATH, languageId, 'lexicons');

  if (fs.existsSync(tcResourcesLexiconPath)) {
    const userResourcesLexiconPath = path.join(USER_RESOURCES_PATH, languageId, 'lexicons');
    copyMissingSubfolders(tcResourcesLexiconPath, userResourcesLexiconPath, languageId);
  }
};

/**
 * this removes old translation helps folders since they may not be compatible with new tCore version.
 */
// TODO: Maybe in future we can add a compatibility check so we don't have to remove all, but for now this will be safe
export function removeOldThelps() {
  const removedResources = {};
  const tcResourcesLanguages = getFilteredSubFolders(USER_RESOURCES_PATH);

  for (let languageId of tcResourcesLanguages) {
    if (languageId) {
      const helpsFolder = path.join(USER_RESOURCES_PATH, languageId, TRANSLATION_HELPS);

      if (fs.existsSync(helpsFolder)) {
        console.log(
          `%c    removeOldThelps() - removing: ${helpsFolder}`,
          'color: #00aced',
        );

        const removedFolders = getFilteredSubFolders(helpsFolder);
        removedResources[languageId] = { removedFolders, helpsFolder };
        fs.removeSync(helpsFolder);
      }
    }
  }
  return removedResources;
}

/**
 * move bibles from old grc resource folder
 */
export function moveResourcesFromOldGrcFolder() {
  const oldGreekResourcesPath = path.join(USER_RESOURCES_PATH, 'grc');

  try {
    if (fs.existsSync(oldGreekResourcesPath)) {
      const oldGrcBiblesPath = path.join(USER_RESOURCES_PATH, 'grc/bibles');
      const newGrcBiblesPath = path.join(USER_RESOURCES_PATH, Bible.NT_ORIG_LANG, 'bibles');
      const oldOrigLangBibles = getFilteredSubFolders(oldGrcBiblesPath);

      for (const bible of oldOrigLangBibles) {
        const oldBiblePath = path.join(oldGrcBiblesPath, bible);

        if (bible !== Bible.NT_ORIG_LANG_BIBLE) {
          const latestVersionOld = ResourceAPI.getLatestVersion(oldBiblePath);

          if (latestVersionOld) {
            let newerResource = true;
            const newGrcBiblePath = path.join(newGrcBiblesPath, bible);
            const latestVersionNew = ResourceAPI.getLatestVersion(newGrcBiblePath);

            if (latestVersionNew) {
              newerResource = ResourceAPI.compareVersions(path.basename(latestVersionOld), path.basename(latestVersionNew)) > 0;
            }

            if (newerResource) {
              if (fs.existsSync(newGrcBiblePath)) {
                console.log('moveResourcesFromOldGrcFolder() - removing old bible at ' + newGrcBiblePath);
                fs.removeSync(newGrcBiblePath);
              }

              const newVersionPath = path.join(newGrcBiblePath, path.basename(latestVersionOld));
              console.log('moveResourcesFromOldGrcFolder() - moving over bible to ' + newVersionPath);
              fs.moveSync(path.join(latestVersionOld), newVersionPath);
            }
          }
        } else { // if original language bible, copy over any missing versions from old path to new
          const versions = getFilteredSubFolders(oldBiblePath);

          for (const version of versions) {
            const newVersionPath = path.join(newGrcBiblesPath, bible, version);

            if (!fs.existsSync(newVersionPath)) {
              console.log('moveResourcesFromOldGrcFolder() - copying over bible to ' + newVersionPath);
              fs.moveSync(path.join(oldBiblePath, version), newVersionPath);
            }
          }
        }
      }
      fs.removeSync(oldGreekResourcesPath);
    }
  } catch (e) {
    console.error('moveResourcesFromOldGrcFolder() - Error occurred migrating old bible resources from ' +
      oldGreekResourcesPath, e);
  }
}

/**
 * find out which Original Language Bible versions are needed by installed tNs.  Only keep the needed versions.
 *    The other versions are deleted.
 * @param {string} languageId
 * @param {string} resourceId
 * @param {string} resourcePath - path for versions of current resource
 * @param {string} resourcesPath - base path for all resources
 * @return {boolean} - returns true if all old resources can be deleted
 */
export function preserveNeededOrigLangVersions(languageId, resourceId, resourcePath, resourcesPath) {
  const havePreRelease = resourcesDownloadHelpers.doResourcesContainPreReleaseData(resourcesPath);

  if (havePreRelease) {
    return false;
  }

  let deleteOldResources = true; // by default we do not keep old versions of resources

  if (BibleHelpers.isOriginalLanguageBible(languageId, resourceId)) {
    let requiredVersions = getOtherTnsOLVersions(resourcesPath, resourceId).sort((a, b) =>
      -ResourceAPI.compareVersions(a, b), // do inverted sort
    );

    const requiredVersions_ = [];

    requiredVersions.forEach((version) => { // make sure we have owner
      if (!version.includes(apiHelpers.OWNER_SEPARATOR)) {
        requiredVersions_.push(resourcesHelpers.addOwnerToKey(version, DEFAULT_ORIG_LANG_OWNER));
        requiredVersions_.push(resourcesHelpers.addOwnerToKey(version, CN_ORIG_LANG_OWNER));
      } else {
        requiredVersions_.push(version);
      }
    });
    requiredVersions = requiredVersions_;
    console.log('preserveNeededOrigLangVersions: requiredVersions', requiredVersions);

    // see if we need to keep old versions of original language
    if (requiredVersions &amp;&amp; requiredVersions.length) {
      deleteOldResources = false;
      const latestVersions = ResourceAPI.getLatestVersionsAndOwners(resourcePath);
      const versions = ResourceAPI.listVersions(resourcePath);
      console.log('preserveNeededOrigLangVersions: versions', versions);

      for (let version of versions) {
        if (!requiredVersions.includes(version)) {
          const { owner } = resourcesHelpers.splitVersionAndOwner(version);
          let highestRequired = latestVersions[owner];

          if (!highestRequired) {
            continue;
          }

          highestRequired = path.basename(highestRequired);
          const newerResource = ResourceAPI.compareVersions(version, highestRequired) >= 0;

          if (!newerResource) { // don't delete if newer/newest version
            const oldPath = path.join(resourcePath, version);
            console.log('preserveNeededOrigLangVersions: removing old version', oldPath);
            fs.removeSync(oldPath);
          }
        }
      }
    }
  }
  return deleteOldResources;
}

/**
 * restores missing resources by language and bible and lexicon
 */
export function getMissingResources() {
  const tcResourcesLanguages = getFilteredSubFolders(STATIC_RESOURCES_PATH);

  for ( const languageId of tcResourcesLanguages) {
    console.log(`%c Checking for missing ${languageId} resources`, 'color: #00539C');
    const staticLanguageResource = path.join(STATIC_RESOURCES_PATH, languageId);
    const userLanguageResource = path.join(USER_RESOURCES_PATH, languageId);
    const resourceTypes = getFilteredSubFolders(staticLanguageResource);

    for ( const resourceType of resourceTypes) {// resourceType: bibles, lexicons or translationHelps
      const resourceTypePath = path.join(staticLanguageResource, resourceType);
      const resourceIds = getFilteredSubFolders(resourceTypePath);

      for ( const resourceId of resourceIds) {// resourceId: udb, ult, ugl, translationWords, translationNotes
        const userResourcePath = path.join(userLanguageResource, resourceType, resourceId);
        const staticResourcePath = path.join(staticLanguageResource, resourceType, resourceId);

        if (resourceType === 'lexicons') {
          // check for lexicons packaged with tc executable.
          checkForNewLexicons(languageId);
          extractZippedResourceContent(userResourcePath, resourceType === 'bibles');
        } else if (!fs.existsSync(userResourcePath)) {// if resource isn't found in user resources folder.
          copyAndExtractResource(staticResourcePath, userResourcePath, languageId, resourceId, resourceType);
        } else { // compare resources manifest modified time
          const owners = ResourceAPI.getLatestVersionsAndOwners(staticResourcePath) || {};
          const ownersKeys = Object.keys(owners);

          if (!ownersKeys || !ownersKeys.length) {
            console.warn(`getMissingResources() - Could not find latest for ${staticResourcePath}`);
          }

          for (const owner of ownersKeys) {
            if (!owner) {
              console.error(`getMissingResources() - skipping empty owner for ${staticResourcePath}`);
              continue;
            }

            const staticResourceVersionPath = owners[owner];
            const version = path.basename(staticResourceVersionPath);
            const userResourceVersionPath = path.join(userResourcePath, version);
            const userResourceExists = fs.existsSync(userResourceVersionPath);
            let isOldResource = false;
            const filename = 'manifest.json';
            const staticResourceManifestPath = path.join(staticResourceVersionPath, filename);

            if (userResourceExists) {
              const userResourceManifestPath = path.join(userResourceVersionPath, filename);

              if (fs.existsSync(userResourceManifestPath) &amp;&amp; fs.existsSync(staticResourceManifestPath)) {
                const { catalog_modified_time: userModifiedTime } = fs.readJsonSync(userResourceManifestPath) || {};
                const { catalog_modified_time: staticModifiedTime } = fs.readJsonSync(staticResourceManifestPath) || {};
                isOldResource = !userModifiedTime || (userModifiedTime &lt; staticModifiedTime);

                if (isOldResource) {
                  console.log('getMissingResources() - userModifiedTime: ' + userModifiedTime);
                  console.log('getMissingResources() - staticModifiedTime: ' + staticModifiedTime);
                }
              } else if (!fs.existsSync(userResourceManifestPath)) {
                if (fs.existsSync(staticResourceManifestPath)) {
                  console.log('getMissingResources() - missing user manifest: ' + userResourceManifestPath);
                  console.log('getMissingResources() - but found static manifest: ' + staticResourceManifestPath);
                  isOldResource = true;
                } else { // if no manifest.json, fall back to checking versions
                  const userVersion = path.basename(userResourceVersionPath);
                  const staticVersion = path.basename(staticResourceVersionPath);
                  isOldResource = ResourceAPI.compareVersions(userVersion, staticVersion) &lt; 0;

                  if (isOldResource) {
                    console.log('getMissingResources() - userVersion: ' + userVersion);
                    console.log('getMissingResources() - staticVersion: ' + staticVersion);
                  }
                }
              }
            } else { // resource folder was empty
              isOldResource = true;
            }

            preserveNeededOrigLangVersions(languageId, resourceId, userResourcePath, USER_RESOURCES_PATH);

            if (isOldResource) {
              console.log(`getMissingResources() - checking ${languageId} ${resourceId} ${owner} - no resource found`);

              // if (deleteOldResources) {
              //   console.log('getMissingResources() - deleting old resources folder: ' + userResourcePath);
              //   fs.removeSync(userResourcePath);
              // }
              console.log('getMissingResources() - unzipping static resources');
              copyAndExtractResource(staticResourcePath, userResourcePath, languageId, resourceId, resourceType, owner);
            } else { // if folder empty, then copy over current resource
              const versions = ResourceAPI.listVersions(userResourcePath, owner);
              const emptyResourceFolder = !versions.length;
              let installResource = emptyResourceFolder;

              if (!emptyResourceFolder) { // make sure bundled version is installed
                const staticResourceVersionPath = ResourceAPI.getLatestVersion(staticResourcePath, owner);
                const bundledVersion = path.basename(staticResourceVersionPath);
                const destinationPath = path.join(userResourcePath, bundledVersion);
                installResource = !fs.existsSync(destinationPath);
              }

              if (installResource) {
                console.log('getMissingResources() - unzipping missing static resources');
                copyAndExtractResource(staticResourcePath, userResourcePath, languageId, resourceId, resourceType, owner);
              }
            }
          }
        }
      }
    }
  }
}

function copyAndExtractResource(staticResourcePath, userResourcePath, languageId, resourceId, resourceType, owner = null) {
  if (!owner) {
    fs.copySync(staticResourcePath, userResourcePath);
    console.log(
      `%c    Copied ${languageId}-${resourceId} from static ${resourceType} to user resources path.`,
      'color: #00aced',
    );
  } else {
    const versions = ResourceAPI.listVersions(staticResourcePath, owner);

    for (const version of versions) {
      const sourcePath = path.join(staticResourcePath, version);
      const destPath = path.join(userResourcePath, version);
      fs.copySync(sourcePath, destPath);
      console.log(
        `%c    Copied ${languageId}-${resourceId}-${version} from static ${resourceType} to user resources path.`,
        'color: #00aced',
      );
    }
  }
  // extract zipped contents
  extractZippedResourceContent(userResourcePath, resourceType === 'bibles');
}

/**
 * Get the content of an article from disk
 * @param {String} resourceType
 * @param {String} articleId
 * @param {String} languageId
 * @param {String} category - Category of the article, e.g. kt, other, translate, etc. Can be blank.
 * @param {String} ownerStr
 * @returns {String} - the content of the article
 */
export const loadArticleData = (resourceType, articleId, languageId, category='', ownerStr = DEFAULT_OWNER) => {
  let articleData = '# Article Not Found: '+articleId+' #\n\nCould not find article for '+articleId;
  const articleFilePath = findArticleFilePath(resourceType, articleId, languageId, category, ownerStr);

  if (articleFilePath) {
    articleData = fs.readFileSync(articleFilePath, 'utf8'); // get file from fs
  }
  return articleData;
};

/**
 * Get the content of an article from disk
 * @param {String} resourceType
 * @param {String} articleId
 * @param {String} languageId
 * @param {String} category - Category of the article, e.g. kt, other, translate, etc. Can be blank.
 * @param {String} ownerStr
 * @returns {String} - the content of the article
 */
export const loadArticleDataAsync = async (resourceType, articleId, languageId, category='', ownerStr = DEFAULT_OWNER) => {
  let articleData = '# Article Not Found: '+articleId+' #\n\nCould not find article for '+articleId;
  const articleFilePath = findArticleFilePath(resourceType, articleId, languageId, category, ownerStr);

  if (articleFilePath) {
    articleData = await fs.readFile(articleFilePath, 'utf8'); // get file from fs
  }
  return articleData;
};

/**
 * Finds the article file within a resource type's path, looking at both the given language and default language in all possible category dirs
 * @param {String} resourceType - e.g. translationWords, translationNotes
 * @param {String} articleId
 * @param {String} languageId - languageId will be first checked, and then we'll try the default GL
 * @param {String} category - the article's category, e.g. other, kt, translate. If blank we'll try to guess it.
 * @param {String} ownerStr
 * @returns {String} - the path to the file, null if doesn't exist
 * Note: resourceType is coming from a tool name
 */
export const findArticleFilePath = (resourceType, articleId, languageId, category='', ownerStr = DEFAULT_OWNER) => {
  const languageDirs = [];

  if (languageId) {
    languageDirs.push(languageId);
  }

  if (languageId !== DEFAULT_GATEWAY_LANGUAGE) {
    languageDirs.push(DEFAULT_GATEWAY_LANGUAGE);
  }

  let categories = [];

  if (! category ){
    if (resourceType === TRANSLATION_WORDS) {
      categories = ['kt', 'names', 'other'];
    } else if (resourceType === TRANSLATION_NOTES || resourceType === TRANSLATION_ACADEMY) {
      categories = ['translate', 'checking', 'process', 'intro'];
      resourceType = TRANSLATION_ACADEMY;
    } else {
      categories = ['content'];
    }
  } else {
    categories.push(category);
  }

  const articleFile = articleId + '.md';

  for (let i = 0, len = languageDirs.length; i &lt; len; ++i) {
    let languageDir = languageDirs[i];
    let typePath = path.join(USER_RESOURCES_PATH, languageDir, TRANSLATION_HELPS, resourceType);
    let versionPath = ResourceAPI.getLatestVersion(typePath, ownerStr) || typePath;

    for (let j = 0, jLen = categories.length; j &lt; jLen; ++j) {
      let categoryDir = categories[j];

      if (resourceType === TRANSLATION_WORDS) {
        categoryDir = path.join(categoryDir, 'articles');
      }

      let articleFilePath = path.join(versionPath, categoryDir, articleFile);

      if (fs.existsSync(articleFilePath)) {
        return articleFilePath;
      }
    }
  }
  return null;
};

/**
 * determine the owner to use for original language based on if owner is in door43-catalog or CN owner.
 * @param owner
 * @return {*|string}
 */
export function getOriginalLangOwner(owner) {
  const origLanOwner = (owner === DEFAULT_ORIG_LANG_OWNER) ? owner : CN_ORIG_LANG_OWNER;
  return origLanOwner;
}
</code></pre>
  </article>
</section>

    


  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a>
  </footer>

  <script src="scripts/linenumber.js"></script>
  <script src="scripts/pagelocation.js"></script>

  
  <script>
    $(function () {
      window.docsearch({
        apiKey: 'f12d46ccb502a9c723d200abe3e3befd',
        indexName: 'translation_core',
        inputSelector: '.search-input',
        debug: false, // Set debug to true if you want to inspect the dropdown
        algoliaOptions: {
          hitsPerPage: 7
        }
      });
    });
  </script>
  

</body>
</html>
